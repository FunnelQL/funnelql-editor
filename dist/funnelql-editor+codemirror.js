/*! CodeMirror + FunnelQL Lint
 * CodeMirror (c) http://codemirror.net/
 * FunnelQL (c) https://funnelql.com/ */
function Lc(){function w(a){this.a=a;this.ia="";this.lb=!1;this.Wa=new Na;this.Oa=!1;this.u=null}function z(a){this.a=a;this.gd=this.hd=this.jd=this.kd=null;this.Wa=new Na;this.u=null;this.yb=!1;this.na=null}function L(a,b,c){this.time=a;this.i=b;this.button=c}function F(a,b,c,d,e){if(!(this instanceof F))return new F(a,b,c,d,e);null==c&&(c=0);yb.call(this,[new zb([new m("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.tb=!1;this.Nc=1;this.ga=this.aa=c;c=v(c,0);this.c=ya(c);this.history=
new fc(null);this.id=++bg;this.Ta=b;this.Pa=d;this.direction="rtl"==e?"rtl":"ltr";this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));Mc(this,{from:c,to:c,text:a});W(this,ya(c),ta)}function X(a,b){this.Ra=a;this.I=b;for(var c=0;c<a.length;++c)a[c].parent=this}function P(a,b){this.m=[];this.type=b;this.doc=a;this.id=++Zd}function O(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b}function x(a,b){this.anchor=a;this.head=b}function n(a,b){this.b=a;this.L=b}
function u(a,b,c){var d=a.display;this.viewport=b;this.visible=Nc(d,a.doc,b);this.ke=!d.g.offsetWidth;this.Sd=d.g.clientHeight;this.Tb=d.g.clientWidth;this.we=$a(a);this.force=c;this.Xc=Oc(a);this.gc=[]}function E(){}function ua(a,b,c){this.a=c;var d=this.U=G("div",[G("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.J=G("div",[G("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=e.tabIndex=-1;a(d);a(e);A(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,
"vertical")});A(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.Mc=!1;J&&8>N&&(this.J.style.minHeight=this.U.style.minWidth="18px")}function m(a,b,c){this.text=a;$d(this,b);this.height=c?c(this):1}function C(a,b,c){this.start=a.start;this.end=a.i;this.string=a.current();this.type=b||null;this.state=c}function q(a,b,c,d){this.state=b;this.doc=a;this.line=c;this.Sa=d||0;this.Ic=null;this.ae=1}function gc(a,b){this.state=a;this.Qa=b}function Y(a,b,c){this.i=this.start=0;this.string=
a;this.tabSize=b||8;this.ib=this.oc=this.pc=0;this.ue=c}function A(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a.Y||(a.Y={}),a[b]=(a[b]||hc).concat(c))}function Na(){this.id=null}function Ab(a){a.select()}function Oa(a,b){var c=a.className,d=ea(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}}function ea(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function ga(a){for(var b=a.childNodes.length;0<
b;--b)a.removeChild(a.firstChild);return a}function ha(a,b){return ga(a).appendChild(b)}function G(a,b,c,d){a=document.createElement(a);if(c&&(a.className=c),d&&(a.style.cssText=d),"string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function ab(a,b,c,d){a=G(a,b,c,d);return a.setAttribute("role","presentation"),a}function Ea(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),
b==a)return!0;while(b=b.parentNode)}function za(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function Pa(a,b){var c=a.className;ea(b).test(c)||(a.className+=(c?" ":"")+b)}function Pc(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!ea(c[d]).test(b)&&(b+=" "+c[d]);return b}function Qc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Qa(a,
b,c){for(var d in b||(b={}),a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function la(a,b,c,d,e){null==b&&-1==(b=a.search(/[^\s\u00a0]/))&&(b=a.length);d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||b<=f)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}}function Z(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function Rc(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||b<=e+g)return d+Math.min(g,b-e);if(e+=f-d,d=f+
1,b<=(e+=c-e%c))return d}}function Sc(a){for(;ic.length<=a;)ic.push(K(ic)+" ");return ic[a]}function K(a){return a[a.length-1]}function jc(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function ae(){}function be(a,b){var c;return c=Object.create?Object.create(a):(ae.prototype=a,new ae),b&&Qa(b,c),c}function Tc(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||cg.test(a))}function kc(a,b){return b?!!(-1<b.source.indexOf("\\w")&&Tc(a))||b.test(a):Tc(a)}function ce(a){for(var b in a)if(a.hasOwnProperty(b)&&
a[b])return!1;return!0}function Uc(a){return 768<=a.charCodeAt(0)&&dg.test(a)}function de(a,b,c){for(;(0>c?0<b:b<a.length)&&Uc(a.charAt(b));)b+=c;return b}function Bb(a,b,c){for(var d=c<b?-1:1;;){if(b==c)return b;var e=(b+c)/2,e=0>d?Math.ceil(e):Math.floor(e);if(e==b)return a(e)?b:c;a(e)?c=e:b=e+d}}function eg(a,b,c){this.input=c;this.Aa=G("div",null,"CodeMirror-scrollbar-filler");this.Aa.setAttribute("cm-not-content","true");this.Ma=G("div",null,"CodeMirror-gutter-filler");this.Ma.setAttribute("cm-not-content",
"true");this.v=ab("div",null,"CodeMirror-code");this.Ob=G("div",null,null,"position: relative; z-index: 1");this.Z=G("div",null,"CodeMirror-cursors");this.measure=G("div",null,"CodeMirror-measure");this.rc=G("div",null,"CodeMirror-measure");this.G=ab("div",[this.measure,this.rc,this.Ob,this.Z,this.v],null,"position: relative; outline: none");var d=ab("div",[this.G],"CodeMirror-lines");this.Kb=G("div",[d],null,"position: relative");this.w=G("div",[this.Kb],"CodeMirror-sizer");this.zc=null;this.Ab=
G("div",null,null,"position: absolute; height: 30px; width: 1px;");this.gutters=G("div",null,"CodeMirror-gutters");this.Eb=null;this.f=G("div",[this.w,this.Ab,this.gutters],"CodeMirror-scroll");this.f.setAttribute("tabIndex","-1");this.g=G("div",[this.Aa,this.Ma,this.f],"CodeMirror");J&&8>N&&(this.gutters.style.zIndex=-1,this.f.style.paddingRight=0);aa||Fa&&Cb||(this.f.draggable=!0);a&&(a.appendChild?a.appendChild(this.g):a(this.g));this.Fd=this.Gd=this.o=this.l=b.first;this.view=[];this.da=this.vc=
null;this.ld=this.md=this.Fa=0;this.ka=null;this.Ua=this.ca=this.qa=0;this.wc=!1;this.tc=this.Fb=this.sc=null;this.Gc=!1;this.fa=this.$a=this.Ga=this.ab=null;this.za=0;this.ya=!1;this.ob=this.pb=this.oa=this.Sb=null;this.shift=!1;this.V=this.Ba=null;c.init(this)}function D(a,b){if(0>(b-=a.first)||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.m;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.m[b]}function Ra(a,b,c){var d=
[],e=b.line;return a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e}),d}function Vc(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function Ga(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function M(a){if(null==a.parent)return null;var b=a.parent;a=Z(b.m,a);for(var c=b.parent;c;c=(b=c).parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function bb(a,b){var c=
a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.m);for(d=0;d<a.m.length;++d){e=a.m[d].height;if(b<e)break;b-=e}return c+d}function Db(a,b){return b>=a.first&&b<a.first+a.size}function Wc(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function v(a,b,c){if(void 0===c&&(c=null),!(this instanceof v))return new v(a,b,c);this.line=a;this.ch=b;this.H=c}function H(a,b){return a.line-b.line||a.ch-
b.ch}function Xc(a,b){return a.H==b.H&&0==H(a,b)}function Yc(a){return v(a.line,a.ch)}function lc(a,b){return 0>H(a,b)?b:a}function mc(a,b){return 0>H(a,b)?a:b}function I(a,b){if(b.line<a.first)return v(a.first,0);var c,d,e=a.first+a.size-1;return b.line>e?v(e,D(a,e).text.length):(c=D(a,b.line).text.length,null==(d=b.ch)||c<d?v(b.line,c):0>d?v(b.line,0):b)}function ee(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=I(a,b[d]);return c}function nc(a,b,c){this.j=a;this.from=b;this.to=c}function Eb(a,b){if(a)for(var c=
0;c<a.length;++c){var d=a[c];if(d.j==b)return d}}function Zc(a,b){if(b.jc)return null;var c=Db(a,b.from.line)&&D(a,b.from.line).s,d=Db(a,b.to.line)&&D(a,b.to.line).s;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==H(b.from,b.to),c=function(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.j;if(null==f.from||(g.O?f.from<=b:f.from<b)||!(f.from!=b||"bookmark"!=g.type||c&&f.j.la)){var h=null==f.to||(g.P?f.to>=b:f.to>b);(d||(d=[])).push(new nc(g,f.from,h?null:f.to))}}return d}(c,e,g),d=
function(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.j;if(null==f.to||(g.P?f.to>=b:f.to>b)||f.from==b&&"bookmark"==g.type&&(!c||f.j.la)){var h=null==f.from||(g.O?f.from<=b:f.from<b);(d||(d=[])).push(new nc(g,h?null:f.from-b,null==f.to?null:f.to-b))}}return d}(d,f,g),f=1==b.text.length,g=K(b.text).length+(f?e:0);if(c)for(var h=0;h<c.length;++h){var k=c[h];if(null==k.to){var l=Eb(d,k.j);l?f&&(k.to=null==l.to?null:l.to+g):k.to=e}}if(d)for(e=0;e<d.length;++e)h=d[e],(null!=h.to&&(h.to+=
g),null==h.from)?Eb(c,h.j)||(h.from=g,f&&(c||(c=[])).push(h)):(h.from+=g,f&&(c||(c=[])).push(h));c&&(c=fe(c));d&&d!=c&&(d=fe(d));e=[c];if(!f){var p,f=b.text.length-2;if(0<f&&c)for(g=0;g<c.length;++g)null==c[g].to&&(p||(p=[])).push(new nc(c[g].j,null,null));for(c=0;c<f;++c)e.push(p);e.push(d)}return e}function fe(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.j.Oc&&a.splice(b--,1)}return a.length?a:null}function ge(a){var b=a.s;if(b){for(var c=0;c<b.length;++c)b[c].j.detachLine(a);
a.s=null}}function $d(a,b){if(b){for(var c=0;c<b.length;++c)b[c].j.attachLine(a);a.s=b}}function $c(a,b){var c=a.m.length-b.m.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=H(c.from,d.from)||(a.O?-1:0)-(b.O?-1:0);return e?-e:H(c.to,d.to)||(a.P?1:0)-(b.P?1:0)||b.id-a.id}function cb(a,b){var c,d=Aa&&a.s;if(d)for(var e=void 0,f=0;f<d.length;++f)(e=d[f]).j.collapsed&&null==(b?e.from:e.to)&&(!c||0>$c(c,e.j))&&(c=e.j);return c}function he(a,b,c,d,e){a=D(a,b);if(a=Aa&&a.s)for(b=0;b<a.length;++b){var f=
a[b];if(f.j.collapsed){var g=f.j.find(0),h=H(g.from,c)||(f.j.O?-1:0)-(e.O?-1:0),k=H(g.to,d)||(f.j.P?1:0)-(e.P?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(f.j.P&&e.O?0<=H(g.to,c):0<H(g.to,c))||0<=h&&(f.j.P&&e.O?0>=H(g.from,d):0>H(g.from,d))))return!0}}}function va(a){for(var b;b=cb(a,!0);)a=b.find(-1,!0).line;return a}function ad(a,b){var c=D(a,b),d=va(c);return c==d?b:M(d)}function ie(a,b){if(b>a.lastLine())return b;var c,d=D(a,b);if(!db(a,d))return b;for(;c=cb(d,!1);)d=c.find(1,!0).line;return M(d)+
1}function db(a,b){var c=Aa&&b.s;if(c)for(var d=void 0,e=0;e<c.length;++e)if((d=c[e]).j.collapsed&&(null==d.from||!d.j.pa&&0==d.from&&d.j.O&&bd(a,b,d)))return!0}function bd(a,b,c){if(null==c.to)return b=c.j.find(1,!0),bd(a,b.line,Eb(b.line.s,c.j));if(c.j.P&&c.to==b.text.length)return!0;for(var d=void 0,e=0;e<b.s.length;++e)if((d=b.s[e]).j.collapsed&&!d.j.pa&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.j.O||c.j.P)&&bd(a,b,d))return!0}function Ia(a){for(var b=0,c=(a=va(a)).parent,d=0;d<c.m.length;++d){var e=
c.m[d];if(e==a)break;b+=e.height}for(a=c.parent;a;a=(c=a).parent)for(d=0;d<a.children.length;++d){e=a.children[d];if(e==c)break;b+=e.height}return b}function oc(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=cb(d,!0);)b=b.find(0,!0),d=b.from.line,c+=b.from.ch-b.to.ch;for(d=a;b=cb(d,!1);)a=b.find(0,!0),c-=d.text.length-a.from.ch,c+=(d=a.to.line).text.length-a.to.ch;return c}function cd(a){var b=a.display;a=a.doc;b.fa=D(a,a.first);b.za=oc(b.fa);b.ya=!0;a.iter(function(a){var c=oc(a);c>b.za&&
(b.za=c,b.fa=a)})}function Fb(a,b,c){var d;Gb=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:Gb=e);f.from==b&&(f.from!=f.to&&"before"!=c?d=e:Gb=e)}return null!=d?d:Gb}function Ba(a,b){var c=a.order;return null==c&&(c=a.order=fg(a.text,b)),c}function ia(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=(a=a.Y)&&a[b];d&&(c=Z(d,c),-1<c&&(a[b]=d.slice(0,c).concat(d.slice(c+
1))))}}function Q(a,b){var c=a.Y&&a.Y[b]||hc;if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function T(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),Q(a,c||b.type,a,b),dd(b)||b.Xe}function je(a){var b=a.Y&&a.Y.Ye;if(b){a=a.h.bb||(a.h.bb=[]);for(var c=0;c<b.length;++c)-1==Z(a,b[c])&&a.push(b[c])}}function ma(a,b){return 0<(a.Y&&a.Y[b]||hc).length}function eb(a){a.prototype.on=function(a,c){A(this,
a,c)};a.prototype.off=function(a,c){ia(this,a,c)}}function ca(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ke(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function dd(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Hb(a){ca(a);ke(a)}function le(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),pa&&a.ctrlKey&&1==b&&(b=3),b}function gg(a){if(null==ed){var b=G("span","\u200b");ha(a,G("span",[b,document.createTextNode("x")]));
0!=a.firstChild.offsetHeight&&(ed=1>=b.offsetWidth&&2<b.offsetHeight&&!(J&&8>N))}a=ed?G("span","\u200b"):G("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");return a.setAttribute("cm-text",""),a}function pc(a){if("string"==typeof a&&fb.hasOwnProperty(a))a=fb[a];else if(a&&"string"==typeof a.name&&fb.hasOwnProperty(a.name)){var b=fb[a.name];"string"==typeof b&&(b={name:b});(a=be(b,a)).name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return pc("application/xml");
if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return pc("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function fd(a,b){b=pc(b);var c=gd[b.name];if(!c)return fd(a,"text/plain");c=c(a,b);if(gb.hasOwnProperty(b.name)){var d=gb[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}if(c.name=b.name,b.fb&&(c.fb=b.fb),b.pd)for(var f in b.pd)c[f]=b.pd[f];return c}function hb(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);
var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function hd(a,b){for(var c;a.innerMode&&(c=a.innerMode(b))&&c.mode!=a;)b=c.state,a=c.mode;return c||{mode:a,state:b}}function me(a,b,c){return!a.startState||a.startState(b,c)}function ne(a,b,c,d){function e(d){c.Ic=f;var e=a.state.overlays[d],k=1,t=0;c.state=!0;oe(a,b.text,e.mode,c,function(a,b){for(var c=k;t<a;){var d=f[k];a<d&&f.splice(k,1,a,f[k+1],d);k+=2;t=Math.min(a,d)}if(b)if(e.bg)f.splice(c,k-c,a,"overlay "+
b),k=c+2;else for(;c<k;c+=2)d=f[c+1],f[c+1]=(d?d+" ":"")+"overlay "+b},g);c.state=h;c.Ic=null;c.ae=1}var f=[a.state.modeGen],g={};oe(a,b.text,a.doc.mode,c,function(a,b){return f.push(a,b)},g,d);var h=c.state;for(d=0;d<a.state.overlays.length;++d)e(d);return{M:f,cc:g.D||g.A?g:null}}function pe(a,b,c){if(!b.M||b.M[0]!=a.state.modeGen){var d=Ib(a,M(b)),e=b.text.length>a.options.maxHighlightLength&&hb(a.doc.mode,d.state),f=ne(a,b,d);e&&(d.state=e);b.S=d.save(!e);b.M=f.M;f.cc?b.ba=f.cc:b.ba&&(b.ba=null);
c===a.doc.aa&&(a.doc.ga=Math.max(a.doc.ga,++a.doc.aa))}return b.M}function Ib(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new q(d,!0,b);var f=function(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);g<b;--b){if(b<=f.first)return f.first;var h=D(f,b-1),k=h.S;if(k&&(!c||b+(k instanceof gc?k.Qa:0)<=f.ga))return b;h=la(h.text,null,a.options.tabSize);(null==e||h<d)&&(e=b-1,d=h)}return e}(a,b,c),g=f>d.first&&D(d,f-1).S,h=g?q.oe(d,g,f):new q(d,me(d.mode),f);return d.iter(f,
b,function(c){id(a,c.text,h);var d=h.line;c.S=d==b-1||0==d%5||d>=e.o&&d<e.l?h.save():null;h.td()}),c&&(d.ga=h.line),h}function id(a,b,c,d){var e=a.doc.mode;a=new Y(b,a.options.tabSize,c);a.start=a.i=d||0;for(""==b&&qe(e,c.state);!a.eol();)jd(e,a,c.state),a.start=a.i}function qe(a,b){if(a.bc)return a.bc(b);if(a.innerMode){var c=hd(a,b);return c.mode.bc?c.mode.bc(c.state):void 0}}function jd(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=hd(a,c).mode);var f=a.T(b,c);if(b.i>b.start)return f}throw Error("Mode "+
a.name+" failed to advance stream.");}function re(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function oe(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k,l=0,p=null,t=new Y(b,a.options.tabSize,d),r=a.options.addModeClass&&[null];for(""==b&&re(qe(c,d.state),
f);!t.eol();){if(k=t.i>a.options.maxHighlightLength?(h=!1,g&&id(a,b,d,t.i),t.i=b.length,null):re(jd(c,t,d.state,r),f),r){var B=r[0].name;B&&(k="m-"+(k?B+" "+k:B))}if(!h||p!=k){for(;l<t.start;)e(l=Math.min(t.start,l+5E3),p);p=k}t.start=t.i}for(;l<t.i;)a=Math.min(t.i,l+5E3),e(a,p),l=a}function se(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?hg:ig;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function te(a,b){var c=ab("span",null,null,aa?"padding-right: .1px":null),c={ha:ab("pre",[c],
"CodeMirror-line"),content:c,W:0,i:0,a:a,Bc:!1,He:(J||aa)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.C?b.C.length:0);d++){var e=d?b.C[d-1]:b.line,f=void 0;c.i=0;c.qb=jg;var g;g=a.display.measure;if(null!=kd)g=kd;else{var h=ha(g,document.createTextNode("A\u062eA")),k=ib(h,0,1).getBoundingClientRect(),h=ib(h,1,2).getBoundingClientRect();g=(ga(g),!(!k||k.left==k.right)&&(kd=3>h.right-k.right))}g&&(f=Ba(e,a.doc.direction))&&(c.qb=kg(c.qb,f));c.map=[];f=c;g=pe(a,e,b!=a.display.da&&M(e));
var l=e.s,k=e.text,h=0;if(l)for(var p=void 0,t=void 0,r=void 0,B=void 0,oa=void 0,Ha=void 0,R=void 0,v=k.length,S=0,u=1,C="",q=0;;){if(q==S){for(var r=B=oa=Ha=t="",R=null,q=1/0,n=[],m=void 0,E=0;E<l.length;++E){var A=l[E],y=A.j;"bookmark"==y.type&&A.from==S&&y.pa?n.push(y):A.from<=S&&(null==A.to||A.to>S||y.collapsed&&A.to==S&&A.from==S)?(null!=A.to&&A.to!=S&&q>A.to&&(q=A.to,B=""),y.className&&(r+=" "+y.className),y.Rc&&(t=(t?t+";":"")+y.Rc),y.Kd&&A.from==S&&(oa+=" "+y.Kd),y.ad&&A.to==q&&(m||(m=[])).push(y.ad,
A.to),y.title&&!Ha&&(Ha=y.title),y.collapsed&&(!R||0>$c(R.j,y))&&(R=A)):A.from>S&&q>A.from&&(q=A.from)}if(m)for(E=0;E<m.length;E+=2)m[E+1]==q&&(B+=" "+m[E]);if(!R||R.from==S)for(m=0;m<n.length;++m)ue(f,0,n[m]);if(R&&(R.from||0)==S){if(ue(f,(null==R.to?v+1:R.to)-S,R.j,null==R.from),null==R.to)break;R.to==S&&(R=!1)}}if(v<=S)break;for(n=Math.min(v,q);;){if(C){m=S+C.length;R||(E=n<m?C.slice(0,n-S):C,f.qb(f,E,p?p+r:r,oa,S+E.length==q?B:"",Ha,t));if(n<=m){C=C.slice(n-S);S=n;break}S=m;oa=""}C=k.slice(h,
h=g[u++]);p=se(g[u++],f.a.options)}}else for(l=1;l<g.length;l+=2)f.qb(f,k.slice(h,h=g[l]),se(g[l+1],f.a.options));e.ba&&(e.ba.D&&(c.D=Pc(e.ba.D,c.D||"")),e.ba.A&&(c.A=Pc(e.ba.A,c.A||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(gg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.xa||(b.measure.xa=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}aa&&(d=c.content.lastChild,(/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&
(c.content.className="cm-tab-wrap-hack"));return Q(a,"renderLine",a,b.line,c.ha),c.ha.className&&(c.A=Pc(c.ha.className,c.A||"")),c}function lg(a){var b=G("span","\u2022","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function jg(a,b,c,d,e,f,g){if(b){var h;if(a.He)if(h=a.Bc,1<b.length&&!/  /.test(b))h=b;else{for(var k="",l=0;l<b.length;l++){var p=b.charAt(l);" "!=p||!h||l!=b.length-1&&32!=b.charCodeAt(l+1)||(p="\u00a0");k+=p;h=" "==p}h=k}else h=
b;k=h;l=a.a.state.specialChars;p=!1;if(l.test(b)){h=document.createDocumentFragment();for(var t=0;;){l.lastIndex=t;var r=l.exec(b),B=r?r.index-t:b.length-t;if(B){var oa=document.createTextNode(k.slice(t,t+B));J&&9>N?h.appendChild(G("span",[oa])):h.appendChild(oa);a.map.push(a.i,a.i+B,oa);a.W+=B;a.i+=B}if(!r)break;t+=B+1;B=void 0;"\t"==r[0]?(r=a.a.options.tabSize,r-=a.W%r,(B=h.appendChild(G("span",Sc(r),"cm-tab"))).setAttribute("role","presentation"),B.setAttribute("cm-text","\t"),a.W+=r):("\r"==r[0]||
"\n"==r[0]?(B=h.appendChild(G("span","\r"==r[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",r[0]):((B=a.a.options.specialCharPlaceholder(r[0])).setAttribute("cm-text",r[0]),J&&9>N?h.appendChild(G("span",[B])):h.appendChild(B)),a.W+=1);a.map.push(a.i,a.i+1,B);a.i++}}else a.W+=b.length,h=document.createTextNode(k),a.map.push(a.i,a.i+b.length,h),J&&9>N&&(p=!0),a.i+=b.length;if(a.Bc=32==k.charCodeAt(b.length-1),c||d||e||p||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=G("span",[h],b,g),f&&(d.title=
f),a.content.appendChild(d);a.content.appendChild(h)}}function kg(a,b){return function(c,d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.i,p=l+d.length;;){for(var t=void 0,r=0;r<b.length&&!((t=b[r]).to>l&&t.from<=l);r++);if(t.to>=p)return a(c,d,e,f,g,h,k);a(c,d.slice(0,t.to-l),e,f,null,h,k);f=null;d=d.slice(t.to-l);l=t.to}}}function ue(a,b,c,d){var e=!d&&c.pa;e&&a.map.push(a.i,a.i+b,e);!d&&a.a.display.input.sd&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",
c.id));e&&(a.a.display.input.Ca(e),a.content.appendChild(e));a.i+=b;a.Bc=!1}function ve(a,b,c){for(var d=this.line=b,e;d=cb(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.C=e)?M(K(this.C))-c+1:1;this.node=this.text=null;this.hidden=db(a,b)}function qc(a,b,c){var d,e=[];for(d=b;d<c;)b=new ve(a.doc,D(a.doc,d),d),d+=b.size,e.push(b);return e}function da(a,b){var c=a.Y&&a.Y[b]||hc;if(c.length){var d,e=Array.prototype.slice.call(arguments,2);jb?d=jb.Vc:Jb?d=Jb:(d=Jb=[],setTimeout(mg,0));
for(var f=function(a){d.push(function(){return c[a].apply(null,e)})},g=0;g<c.length;++g)f(g)}}function mg(){var a=Jb;Jb=null;for(var b=0;b<a.length;++b)a[b]()}function we(a,b,c,d){for(var e=0;e<b.F.length;e++){var f=b.F[e];if("text"==f){var f=a,g=b,h=g.text.className,k=xe(f,g);g.text==g.node&&(g.node=k.ha);g.text.parentNode.replaceChild(k.ha,g.text);g.text=k.ha;k.D!=g.D||k.A!=g.A?(g.D=k.D,g.A=k.A,ld(f,g)):h&&(g.text.className=h)}else if("gutter"==f)ye(a,b,c,d);else if("class"==f)ld(a,b);else if("widget"==
f){f=a;g=b;h=d;g.rb&&(g.rb=null);for(var k=g.node.firstChild,l;k;k=l)l=k.nextSibling,"CodeMirror-linewidget"==k.className&&g.node.removeChild(k);ze(f,g,h)}}b.F=null}function Kb(a){return a.node==a.text&&(a.node=G("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),J&&8>N&&(a.node.style.zIndex=2)),a.node}function xe(a,b){var c=a.display.da;return c&&c.line==b.line?(a.display.da=null,b.measure=c.measure,c.ce):te(a,b)}function ld(a,
b){var c=b.D?b.D+" "+(b.line.D||""):b.line.D;if(c&&(c+=" CodeMirror-linebackground"),b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var d=Kb(b);b.background=d.insertBefore(G("div",null,c),d.firstChild);a.display.input.Ca(b.background)}!0;b.line.Fc?Kb(b).className=b.line.Fc:b.node!=b.text&&(b.node.className="");b.text.className=(b.A?b.A+" "+(b.line.A||""):b.line.A)||""}function ye(a,b,c,d){if(b.La&&(b.node.removeChild(b.La),
b.La=null),b.ua&&(b.node.removeChild(b.ua),b.ua=null),b.line.kc){var e=Kb(b);b.ua=G("div",null,"CodeMirror-gutter-background "+b.line.kc,"left: "+(a.options.fixedGutter?d.hc:-d.Na)+"px; width: "+d.Na+"px");a.display.input.Ca(b.ua);e.insertBefore(b.ua,b.text)}e=b.line.$;if(a.options.lineNumbers||e){var f=Kb(b),g=b.La=G("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.hc:-d.Na)+"px");if(a.display.input.Ca(g),f.insertBefore(g,b.text),b.line.kc&&(g.className+=" "+b.line.kc),!a.options.lineNumbers||
e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(G("div",Wc(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.ed["CodeMirror-linenumbers"]+"px; width: "+a.display.Fb+"px"))),e)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(f=e.hasOwnProperty(c)&&e[c])&&g.appendChild(G("div",[f],"CodeMirror-gutter-elt","left: "+d.ed[c]+"px; width: "+d.lc[c]+"px"))}}function ze(a,b,c){if(Ae(a,b.line,b,c,!0),b.C)for(var d=0;d<b.C.length;d++)Ae(a,b.C[d],b,c,!1)}function Ae(a,
b,c,d,e){if(b.B){var f=Kb(c),g=0;for(b=b.B;g<b.length;++g){var h=b[g],k=G("div",[h.node],"CodeMirror-linewidget");h.mc||k.setAttribute("cm-ignore-events","true");var l=h,p=k,t=d;if(l.Lb){(c.rb||(c.rb=[])).push(p);var r=t.Tb;p.style.left=t.hc+"px";l.Qc||(r-=t.Na,p.style.paddingLeft=t.Na+"px");p.style.width=r+"px"}l.Qc&&(p.style.zIndex=5,p.style.position="relative",l.Lb||(p.style.marginLeft=-t.Na+"px"));a.display.input.Ca(k);e&&h.Yd?f.insertBefore(k,c.La||c.text):f.appendChild(k);da(h,"redraw")}}}function md(a){if(null!=
a.height)return a.height;var b=a.doc.a;if(!b)return 0;if(!Ea(document.body,a.node)){var c="position: relative;";a.Qc&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.Lb&&(c+="width: "+b.display.g.clientWidth+"px;");ha(b.display.measure,G("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function Ca(a,b){for(var c=b.target||b.srcElement;c!=a.g;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.w&&c!=a.Kb)return!0}function nd(a){return a.Kb.offsetHeight-
a.G.offsetHeight}function Be(a){if(a.ab)return a.ab;var b=ha(a.measure,G("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return isNaN(b.left)||isNaN(b.right)||(a.ab=b),b}function Da(a){return 30-a.display.Ua}function $a(a){return a.display.f.clientWidth-Da(a)-a.display.qa}function Ce(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.C.length;d++)if(a.C[d]==b)return{map:a.measure.xa[d],
cache:a.measure.caches[d]};for(b=0;b<a.C.length;b++)if(M(a.C[b])>c)return{map:a.measure.xa[b],cache:a.measure.caches[b],$b:!0}}function De(a,b){if(b>=a.display.o&&b<a.display.l)return a.display.view[Sa(a,b)];var c=a.display.da;return c&&b>=c.K&&b<c.K+c.size?c:void 0}function Ta(a,b){var c=M(b),d=De(a,c);d&&!d.text?d=null:d&&d.F&&(we(a,d,c,Oc(a)),a.h.ta=!0);if(!d){var e=b,d=M(e=va(e)),e=a.display.da=new ve(a.doc,e,d);e.K=d;d=e.ce=te(a,e);d=(e.text=d.ha,ha(a.display.rc,d.ha),e)}c=Ce(d,b,c);return{line:b,
view:d,rect:null,map:c.map,cache:c.cache,$b:c.$b,fd:!1}}function qa(a,b,c,d,e){b.$b&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.fd||(!function(a,b,c){var d=a.options.lineWrapping,e=d&&$a(a);if(!b.measure.nc||d&&b.measure.width!=e){a=b.measure.nc=[];if(d)for(b.measure.width=e,b=b.text.firstChild.getClientRects(),d=0;d<b.length-1;d++){var e=b[d],f=b[d+1];2<Math.abs(e.bottom-f.bottom)&&a.push((e.bottom+f.top)/2-c.top)}a.push(c.bottom-
c.top)}}(a,b.view,b.rect),b.fd=!0),(f=function(a,b,c,d){var e,f=Ee(b.map,c,d),g=f.node,h=f.start,k=f.end;c=f.collapse;if(3==g.nodeType){for(var l=0;4>l;l++){for(;h&&Uc(b.line.text.charAt(f.vb+h));)--h;for(;f.vb+k<f.Pc&&Uc(b.line.text.charAt(f.vb+k));)++k;if(J&&9>N&&0==h&&k==f.Pc-f.vb)k=g.parentNode.getBoundingClientRect();else{var k=ib(g,h,k).getClientRects(),p=Fe;if("left"==d)for(var v=0;v<k.length&&(p=k[v]).left==p.right;v++);else for(v=k.length-1;0<=v&&(p=k[v]).left==p.right;v--);k=p}if((e=k).left||
e.right||0==h)break;k=h;--h;c="right"}J&&11>N&&((d=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=od?d=od:(f=ha(a.display.measure,G("span","x")),d=f.getBoundingClientRect(),f=ib(f,0,1).getBoundingClientRect(),d=od=1<Math.abs(d.left-f.left)),d=!d),d||(d=screen.logicalXDPI/screen.deviceXDPI,f=screen.logicalYDPI/screen.mf,e={left:e.left*d,right:e.right*d,top:e.top*f,bottom:e.bottom*f}))}else 0<h&&(c=d="right"),e=a.options.lineWrapping&&1<(l=g.getClientRects()).length?
l["right"==d?l.length-1:0]:g.getBoundingClientRect();!(J&&9>N)||h||e&&(e.left||e.right)||(e=(g=g.parentNode.getClientRects()[0])?{left:g.left,right:g.left+rc(a.display),top:g.top,bottom:g.bottom}:Fe);g=e.top-b.rect.top;h=e.bottom-b.rect.top;d=(g+h)/2;f=b.view.measure.nc;for(l=0;l<f.length-1&&!(d<f[l]);l++);b={left:("right"==c?e.right:e.left)-b.rect.left,right:("left"==c?e.left:e.right)-b.rect.left,top:l?f[l-1]:0,bottom:f[l]};e.left||e.right||(b.be=!0);a.options.singleCursorHeightPerLine||(b.Ee=g,
b.De=h);return b}(a,b,c,d)).be||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.Ee:f.top,bottom:e?f.De:f.bottom}}function Ee(a,b,c){for(var d,e,f,g,h,k,l=0;l<a.length;l+=3)if(h=a[l],k=a[l+1],b<h?(e=0,f=1,g="left"):b<k?f=(e=b-h)+1:(l==a.length-3||b==k&&a[l+3]>b)&&(e=(f=k-h)-1,k<=b&&(g="right")),null!=e){if(d=a[l+2],h==k&&c==(d.la?"left":"right")&&(g=c),"left"==c&&0==e)for(;l&&a[l-2]==a[l-3]&&a[l-1].la;)d=a[2+(l-=3)],g="left";if("right"==c&&e==k-h)for(;l<a.length-3&&a[l+3]==a[l+4]&&!a[l+5].la;)d=
a[(l+=3)+2],g="right";break}return{node:d,start:e,end:f,collapse:g,vb:h,Pc:k}}function Ge(a){a.display.rf=null;ga(a.display.rc);for(var b=0;b<a.display.view.length;b++){var c=a.display.view[b];if(c.measure&&(c.measure.cache={},c.measure.nc=null,c.C))for(var d=0;d<c.C.length;d++)c.measure.caches[d]={}}}function sc(a){Ge(a);a.display.$a=a.display.Ga=a.display.ab=null;a.options.lineWrapping||(a.display.ya=!0);a.display.sc=null}function He(){return tc&&uc?-(document.body.getBoundingClientRect().left-
parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ie(){return tc&&uc?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function pd(a){var b=0;if(a.B)for(var c=0;c<a.B.length;++c)a.B[c].Yd&&(b+=md(a.B[c]));return b}function qd(a,b,c,d){var e=pd(b);c.top+=e;c.bottom+=e;if("line"==d)return c;d||(d=
"local");b=Ia(b);if("local"==d?b+=a.display.G.offsetTop:b-=a.display.Fa,"page"==d||"window"==d)a=a.display.G.getBoundingClientRect(),b+=a.top+("window"==d?0:Ie()),d=a.left+("window"==d?0:He()),c.left+=d,c.right+=d;return c.top+=b,c.bottom+=b,c}function rd(a,b,c,d,e){d||(d=D(a.doc,b.line));var f=d;b=b.ch;d=qa(a,Ta(a,d),b,e);return qd(a,f,d,c)}function wa(a,b,c,d,e,f){function g(b,g){var h=qa(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,qd(a,d,h,c)}function h(a,b,c){return g(c?a-
1:a,1==k[b].level!=c)}d=d||D(a.doc,b.line);e||(e=Ta(a,d));var k=Ba(d,a.doc.direction),l=b.ch;b=b.H;if(l>=d.text.length?(l=d.text.length,b="before"):0>=l&&(l=0,b="after"),!k)return g("before"==b?l-1:l,"before"==b);var p=Fb(k,l,b),t=Gb,p=h(l,p,"before"==b);return null!=t&&(p.jb=h(l,t,"before"!=b)),p}function Je(a,b){var c=0;b=I(a.doc,b);a.options.lineWrapping||(c=rc(a.display)*b.ch);var d=D(a.doc,b.line),e=Ia(d)+a.display.G.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function sd(a,b,c,
d,e){a=v(a,b,c);return a.Ub=e,d&&(a.ye=!0),a}function td(a,b,c){var d=a.doc;if(0>(c+=a.display.Fa))return sd(d.first,0,null,!0,-1);var e=bb(d,c),f=d.first+d.size-1;if(f<e)return sd(d.first+d.size-1,D(d,f).text.length,null,!0,1);0>b&&(b=0);for(var g=D(d,e);;){var f=ng(a,g,e,b,c),h;h=f.ch+(0<f.Ub?1:0);var k=void 0;if(g=Aa&&g.s)for(var l=0;l<g.length;++l){var p=g[l];p.j.collapsed&&(null==p.from||p.from<h)&&(null==p.to||p.to>h)&&(!k||0>$c(k,p.j))&&(k=p.j)}h=k;if(!h)return f;f=h.find(1);if(f.line==e)return f;
g=D(d,e=f.line)}}function Ke(a,b,c,d){d-=pd(b);b=b.text.length;var e=Bb(function(b){return qa(a,c,b-1).bottom<=d},b,0);return{ra:e,end:b=Bb(function(b){return qa(a,c,b).top>d},e,b)}}function Le(a,b,c,d){return c||(c=Ta(a,b)),Ke(a,b,c,qd(a,b,qa(a,c,d),"line").top)}function ud(a,b,c,d){return!(a.bottom<=c)&&(a.top>c||(d?a.left:a.right)>b)}function ng(a,b,c,d,e){e-=Ia(b);var f=Ta(a,b),g=pd(b),h=0,k=b.text.length,l=!0,p=Ba(b,a.doc.direction);p&&(p=(a.options.lineWrapping?function(a,b,c,d,e,f,g){g=Ke(a,
b,d,g);c=g.ra;g=g.end;/\s/.test(b.text.charAt(g-1))&&g--;for(var h=b=null,k=0;k<e.length;k++){var l=e[k];if(!(l.from>=g||l.to<=c)){var p=qa(a,d,1!=l.level?Math.min(g,l.to)-1:Math.max(c,l.from)).right,p=p<f?f-p+1E9:p-f;(!b||p<h)&&(b=l,h=p)}}b||(b=e[e.length-1]);b.from<c&&(b={from:c,to:b.to,level:b.level});b.to>g&&(b={from:b.from,to:g,level:b.level});return b}:function(a,b,c,d,e,f,g){var h=Bb(function(h){h=e[h];var k=1!=h.level;return ud(wa(a,v(c,k?h.to:h.from,k?"before":"after"),"line",b,d),f,g,!0)},
0,e.length-1),k=e[h];if(0<h){var l=1!=k.level,l=wa(a,v(c,l?k.from:k.to,l?"after":"before"),"line",b,d);ud(l,f,g,!0)&&l.top>g&&(k=e[h-1])}return k})(a,b,c,f,p,d,e),h=(l=1!=p.level)?p.from:p.to-1,k=l?p.to:p.from-1);var t=null,r=null,p=Bb(function(b){var c=qa(a,f,b);return c.top+=g,c.bottom+=g,!!ud(c,d,e,!1)&&(c.top<=e&&c.left<=d&&(t=b,r=c),!0)},h,k),B=!1;r?(h=d-r.left<r.right-d,l=h==l,p=t+(l?0:1),l=l?"after":"before",h=h?r.left:r.right):(l||p!=k&&p!=h||p++,l=0==p?"after":p==b.text.length?"before":qa(a,
f,p-(l?1:0)).bottom+g<=e==l?"after":"before",B=wa(a,v(c,p,l),"line",b,f),h=B.left,B=e<B.top||e>=B.bottom);return sd(c,p=de(b.text,p,1),l,B,d-h)}function kb(a){if(null!=a.Ga)return a.Ga;if(null==Ua){Ua=G("pre");for(var b=0;49>b;++b)Ua.appendChild(document.createTextNode("x")),Ua.appendChild(G("br"));Ua.appendChild(document.createTextNode("x"))}ha(a.measure,Ua);b=Ua.offsetHeight/50;return 3<b&&(a.Ga=b),ga(a.measure),b||1}function rc(a){if(null!=a.$a)return a.$a;var b=G("span","xxxxxxxxxx"),c=G("pre",
[b]);ha(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;return 2<b&&(a.$a=b),b||10}function Oc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{hc:vd(b),Na:b.gutters.offsetWidth,ed:c,lc:d,Tb:b.g.clientWidth}}function vd(a){return a.f.getBoundingClientRect().left-a.w.getBoundingClientRect().left}function Me(a){var b=kb(a.display),c=
a.options.lineWrapping,d=c&&Math.max(5,a.display.f.clientWidth/rc(a.display)-3);return function(e){if(db(a.doc,e))return 0;var f=0;if(e.B)for(var g=0;g<e.B.length;g++)e.B[g].height&&(f+=e.B[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function wd(a){var b=a.doc,c=Me(a);b.iter(function(a){var b=c(a);b!=a.height&&Ga(a,b)})}function Va(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var f,g;c=e.G.getBoundingClientRect();try{f=
b.clientX-c.left,g=b.clientY-c.top}catch(k){return null}var h;b=td(a,f,g);d&&1==b.Ub&&(h=D(a.doc,b.line).text).length==b.ch&&(d=la(h,h.length,a.options.tabSize)-h.length,b=v(b.line,Math.max(0,Math.round((f-Be(a.display).left)/rc(a.display))-d)));return b}function Sa(a,b){if(b>=a.display.l||0>(b-=a.display.o))return null;for(var c=a.display.view,d=0;d<c.length;d++)if(0>(b-=c[d].size))return d}function Lb(a){a.display.input.Qb(a.display.input.Mb())}function Ne(a,b){void 0===b&&(b=!0);for(var c=a.doc,
d={},e=d.Tc=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.c.b.length;g++)if(b||g!=c.c.L){var h=c.c.b[g];if(!(h.from().line>=a.display.l||h.to().line<a.display.o)){var k=h.empty();(k||a.options.showCursorWhenSelecting)&&Oe(a,h.head,e);k||og(a,h,f)}}return d}function Oe(a,b,c){b=wa(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var d=c.appendChild(G("div","\u00a0","CodeMirror-cursor"));if(d.style.left=b.left+"px",d.style.top=b.top+"px",d.style.height=
Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px",b.jb)a=c.appendChild(G("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.jb.left+"px",a.style.top=b.jb.top+"px",a.style.height=.85*(b.jb.bottom-b.jb.top)+"px"}function vc(a,b){return a.top-b.top||a.left-b.left}function og(a,b,c){function d(a,b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);h.appendChild(G("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+
b+"px; width: "+(null==c?p-a:c)+"px;\n                             height: "+(d-b)+"px"))}function e(b,c,e){function f(c,d){return rd(a,v(b,c),"div",r,d)}function h(b,c,d){b=Le(a,r,null,b);c="ltr"==c==("after"==d)?"left":"right";return f("after"==d?b.ra:b.end-(/\s/.test(r.text.charAt(b.end-1))?2:1),c)[c]}var k,B,r=D(g,b),oa=r.text.length,Ha=Ba(r,g.direction);return function(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,
b),Math.min(g.to,c),1==g.level?"rtl":"ltr",f),e=!0)}e||d(b,c,"ltr")}(Ha,c||0,null==e?oa:e,function(a,b,g,r){var v="ltr"==g,q=f(a,v?"left":"right"),m=f(b-1,v?"right":"left"),n=null==c&&0==a,C=null==e&&b==oa,A=0==r;r=!Ha||r==Ha.length-1;if(3>=m.top-q.top){var u=(t?n:C)&&A?l:(v?q:m).left;d(u,q.top,((t?C:n)&&r?p:(v?m:q).right)-u,q.bottom)}else{var R,y,v=v?(u=t&&n&&A?l:q.left,R=t?p:h(a,g,"before"),y=t?l:h(b,g,"after"),t&&C&&r?p:m.right):(u=t?h(a,g,"before"):l,R=!t&&n&&A?p:q.right,y=!t&&C&&r?l:m.left,t?
h(b,g,"after"):p);d(u,q.top,R-u,q.bottom);q.bottom<m.top&&d(l,q.bottom,null,m.top);d(y,m.top,v-y,m.bottom)}(!k||0>vc(q,k))&&(k=q);0>vc(m,k)&&(k=m);(!B||0>vc(q,B))&&(B=q);0>vc(m,B)&&(B=m)}),{start:k,end:B}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),k=Be(a.display),l=k.left,p=Math.max(f.zc,$a(a)-f.w.offsetLeft)-k.right,t="ltr"==g.direction,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var r=D(g,f.line),k=D(g,b.line),k=va(r)==va(k),f=e(f.line,f.ch,k?r.text.length+1:
null).end;b=e(b.line,k?0:null,b.ch).start;k&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(l,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(l,f.bottom,null,b.top)}c.appendChild(h)}function xd(a){if(a.state.focused){var b=a.display;clearInterval(b.Jc);var c=!0;b.Z.style.visibility="";0<a.options.cursorBlinkRate?b.Jc=setInterval(function(){return b.Z.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.Z.style.visibility=
"hidden")}}function Qe(a){a.state.focused||(a.display.input.focus(),yd(a))}function Re(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Mb(a))},100)}function yd(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(Q(a,"focus",a,b),a.state.focused=!0,Pa(a.display.g,"CodeMirror-focused"),a.h||a.display.Ba==a.doc.c||(a.display.input.reset(),aa&&setTimeout(function(){return a.display.input.reset(!0)},
20)),a.display.input.Bd()),xd(a))}function Mb(a,b){a.state.delayingBlurEvent||(a.state.focused&&(Q(a,"blur",a,b),a.state.focused=!1,Oa(a.display.g,"CodeMirror-focused")),clearInterval(a.display.Jc),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function wc(a){a=a.display;for(var b=a.v.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(J&&8>N){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-
e;if(2>e&&(e=kb(a)),(.005<f||-.005>f)&&(Ga(d.line,e),Se(d.line),d.C))for(e=0;e<d.C.length;e++)Se(d.C[e])}}}function Se(a){if(a.B)for(var b=0;b<a.B.length;++b){var c=a.B[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function Nc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.f.scrollTop,d=Math.floor(d-a.G.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.g.clientHeight,d=bb(b,d),e=bb(b,e);if(c&&c.fc){var f=c.fc.from.line;c=c.fc.to.line;f<d?e=bb(b,Ia(D(b,d=f))+a.g.clientHeight):Math.min(c,b.lastLine())>=
e&&(d=bb(b,Ia(D(b,c))-a.g.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Te(a){var b=a.display,c=b.view;if(b.Gc||b.gutters.firstChild&&a.options.fixedGutter){for(var d=vd(b)-b.f.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&(c[g].La&&(c[g].La.style.left=f),c[g].ua&&(c[g].ua.style.left=f));var h=c[g].rb;if(h)for(var k=0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Ue(a){if(!a.options.lineNumbers)return!1;
var b=a.doc,b=Wc(a.options,b.first+b.size-1),c=a.display;if(b.length==c.sc)return!1;var d=c.measure.appendChild(G("div",[G("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;return c.Eb.style.width="",c.Fb=Math.max(e,c.Eb.offsetWidth-d)+1,c.tc=c.Fb+d,c.sc=c.Fb?b.length:-1,c.Eb.style.width=c.tc+"px",zd(a),!0}function Ad(a,b){var c=a.display,d=kb(a.display);0>b.top&&(b.top=0);var e=a.h&&null!=a.h.scrollTop?a.h.scrollTop:c.f.scrollTop,f=a.display.f.clientHeight-
Da(a)-a.display.ca,g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+nd(c),k=b.top<d,d=b.bottom>h-d;b.top<e?g.scrollTop=k?0:b.top:b.bottom>e+f&&(f=Math.min(b.top,(d?h:b.bottom)-f),f!=e&&(g.scrollTop=f));e=a.h&&null!=a.h.scrollLeft?a.h.scrollLeft:c.f.scrollLeft;c=$a(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0);f=b.right-b.left>c;return f&&(b.right=b.left+c),10>b.left?g.scrollLeft=0:b.left<e?g.scrollLeft=Math.max(0,b.left-(f?0:10)):b.right>c+e-3&&(g.scrollLeft=b.right+(f?0:10)-c),g}
function Bd(a,b){null!=b&&(xc(a),a.h.scrollTop=(null==a.h.scrollTop?a.doc.scrollTop:a.h.scrollTop)+b)}function lb(a){xc(a);var b=a.getCursor();a.h.R={from:b,to:b,margin:a.options.cursorScrollMargin}}function yc(a,b,c){null==b&&null==c||xc(a);null!=b&&(a.h.scrollLeft=b);null!=c&&(a.h.scrollTop=c)}function xc(a){var b=a.h.R;b&&(a.h.R=null,Ve(a,Je(a,b.from),Je(a,b.to),b.margin))}function Ve(a,b,c,d){b=Ad(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,
c.bottom)+d});yc(a,b.scrollLeft,b.scrollTop)}function Nb(a,b){2>Math.abs(a.doc.scrollTop-b)||(Fa||Cd(a,{top:b}),We(a,b,!0),Fa&&Cd(a),Ob(a,100))}function We(a,b,c){b=Math.min(a.display.f.scrollHeight-a.display.f.clientHeight,b);(a.display.f.scrollTop!=b||c)&&(a.doc.scrollTop=b,a.display.scrollbars.Pb(b),a.display.f.scrollTop!=b&&(a.display.f.scrollTop=b))}function Wa(a,b,c,d){b=Math.min(b,a.display.f.scrollWidth-a.display.f.clientWidth);(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=
b,Te(a),a.display.f.scrollLeft!=b&&(a.display.f.scrollLeft=b),a.display.scrollbars.xc(b))}function Pb(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+nd(a.display));return{clientHeight:b.f.clientHeight,Ne:b.g.clientHeight,scrollWidth:b.f.scrollWidth,clientWidth:b.f.clientWidth,Oe:b.g.clientWidth,Hc:a.options.fixedGutter?c:0,ec:d,scrollHeight:d+Da(a)+b.ca,Ua:b.Ua,lc:c}}function mb(a,b){b||(b=Pb(a));var c=a.display.qa,d=a.display.ca;Xe(a,b);for(var e=0;4>e&&c!=a.display.qa||d!=
a.display.ca;e++)c!=a.display.qa&&a.options.lineWrapping&&wc(a),Xe(a,Pb(a)),c=a.display.qa,d=a.display.ca}function Xe(a,b){var c=a.display,d=c.scrollbars.update(b);c.w.style.paddingRight=(c.qa=d.right)+"px";c.w.style.paddingBottom=(c.ca=d.bottom)+"px";c.Ab.style.borderBottom=d.bottom+"px solid transparent";d.right&&d.bottom?(c.Aa.style.display="block",c.Aa.style.height=d.bottom+"px",c.Aa.style.width=d.right+"px"):c.Aa.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?
(c.Ma.style.display="block",c.Ma.style.height=d.bottom+"px",c.Ma.style.width=b.lc+"px"):c.Ma.style.display=""}function Ye(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&Oa(a.display.g,a.display.scrollbars.addClass));a.display.scrollbars=new Ze[a.options.scrollbarStyle](function(b){a.display.g.insertBefore(b,a.display.Aa);A(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},
function(b,c){"horizontal"==c?Wa(a,b):Nb(a,b)},a);a.display.scrollbars.addClass&&Pa(a.display.g,a.display.scrollbars.addClass)}function nb(a){a.h={a:a,Ec:!1,Je:a.doc.height,ta:!1,Rb:null,Pd:!1,ub:null,bb:null,Sc:0,ja:!1,Dc:!1,scrollLeft:null,scrollTop:null,R:null,focus:!1,id:++pg};a=a.h;jb?jb.Va.push(a):a.Ae=jb={Va:[a],Vc:[]}}function ob(a){!function(a,c){var b=a.Ae;if(b)try{var e=b.Vc,f=0;do{for(;f<e.length;f++)e[f].call(null);for(var g=0;g<b.Va.length;g++){var h=b.Va[g];if(h.bb)for(;h.Sc<h.bb.length;)h.bb[h.Sc++].call(null,
h.a)}}while(f<e.length);!0}finally{jb=null,c(b)}}(a.h,function(a){for(var b=0;b<a.Va.length;b++)a.Va[b].a.h=null;a=a.Va;for(b=0;b<a.length;b++){var d=a[b],e=void 0,f=d.a,g=f.display;!(e=f.display).wc&&e.f.offsetWidth&&(e.Ua=e.f.offsetWidth-e.f.clientWidth,e.Ab.style.height=Da(f)+"px",e.w.style.marginBottom=-e.Ua+"px",e.w.style.borderRightWidth=Da(f)+"px",e.wc=!0);d.Dc&&cd(f);d.uc=d.Ec||d.ta||null!=d.scrollTop||d.R&&(d.R.from.line<g.o||d.R.to.line>=g.l)||g.ya&&f.options.lineWrapping;d.update=d.uc&&
new u(f,d.uc&&{top:d.scrollTop,fc:d.R},d.ta)}for(b=0;b<a.length;b++)(h=a[b]).nb=h.uc&&Dd(h.a,h.update);var h;for(h=0;h<a.length;h++)b=a[h],d=b.a,e=d.display,b.nb&&wc(d),b.Zb=Pb(d),e.ya&&!d.options.lineWrapping&&(f=e.fa.text.length,f=qa(d,Ta(d,e.fa),f,void 0),b.Za=f.left+3,d.display.zc=b.Za,b.Zb.scrollWidth=Math.max(e.f.clientWidth,e.w.offsetLeft+b.Za+Da(d)+d.display.qa),b.nd=Math.max(0,e.w.offsetLeft+b.Za-$a(d))),(b.nb||b.ja)&&(b.yd=e.input.Mb());for(h=0;h<a.length;h++)b=a[h],d=b.a,null!=b.Za&&(d.display.w.style.minWidth=
b.Za+"px",b.nd<d.doc.scrollLeft&&Wa(d,Math.min(d.display.f.scrollLeft,b.nd),!0),d.display.ya=!1),e=b.focus&&b.focus==za(),b.yd&&d.display.input.Qb(b.yd,e),(b.nb||b.Je!=d.doc.height)&&mb(d,b.Zb),b.nb&&Ed(d,b.Zb),b.ja&&xd(d),d.state.focused&&b.Rb&&d.display.input.reset(b.Pd),e&&Qe(b.a);for(h=0;h<a.length;h++)qg(a[h]);!0})}function qg(a){var b=a.a,c=b.display,d=b.doc;(a.nb&&$e(b,a.update),null==c.oa||null==a.scrollTop&&null==a.scrollLeft&&!a.R||(c.oa=c.Sb=null),null!=a.scrollTop&&We(b,a.scrollTop,a.sf),
null!=a.scrollLeft&&Wa(b,a.scrollLeft,!0,!0),a.R)&&function(a,b){if(!T(a,"scrollCursorIntoView")){var c=a.display,d=c.w.getBoundingClientRect(),e=null;(0>b.top+d.top?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null==e||rg)||(c=G("div","\u200b",null,"position: absolute;\n                         top: "+(b.top-c.Fa-a.display.G.offsetTop)+"px;\n                         height: "+(b.bottom-b.top+Da(a)+c.ca)+"px;\n                         left: "+b.left+"px; width: "+
Math.max(2,b.right-b.left)+"px;"),a.display.G.appendChild(c),c.scrollIntoView(e),a.display.G.removeChild(c))}}(b,function(a,b,c,d){var e;null==d&&(d=0);a.options.lineWrapping||b!=c||(c="before"==(b=b.ch?v(b.line,"before"==b.H?b.ch-1:b.ch,"after"):b).H?v(b.line,b.ch+1,"before"):b);for(var f=0;5>f;f++){var g=!1;e=wa(a,b);var h=c&&c!=b?wa(a,c):e,h=Ad(a,e={left:Math.min(e.left,h.left),top:Math.min(e.top,h.top)-d,right:Math.max(e.left,h.left),bottom:Math.max(e.bottom,h.bottom)+d}),k=a.doc.scrollTop,l=
a.doc.scrollLeft;if(null!=h.scrollTop&&(Nb(a,h.scrollTop),1<Math.abs(a.doc.scrollTop-k)&&(g=!0)),null!=h.scrollLeft&&(Wa(a,h.scrollLeft),1<Math.abs(a.doc.scrollLeft-l)&&(g=!0)),!g)break}return e}(b,I(d,a.R.from),I(d,a.R.to),a.R.margin));var e=a.Jb,f=a.od;if(e)for(var g=0;g<e.length;++g)e[g].m.length||Q(e[g],"hide");if(f)for(e=0;e<f.length;++e)f[e].m.length&&Q(f[e],"unhide");c.g.offsetHeight&&(d.scrollTop=b.display.f.scrollTop);a.ub&&Q(b,"changes",b,a.ub);a.update&&a.update.finish()}function na(a,
b){if(a.h)return b();nb(a);try{return b()}finally{ob(a)}}function U(a,b){return function(){if(a.h)return b.apply(a,arguments);nb(a);try{return b.apply(a,arguments)}finally{ob(a)}}}function xa(a){return function(){if(this.h)return a.apply(this,arguments);nb(this);try{return a.apply(this,arguments)}finally{ob(this)}}}function V(a){return function(){var b=this.a;if(!b||b.h)return a.apply(this,arguments);nb(b);try{return a.apply(this,arguments)}finally{ob(b)}}}function ja(a,b,c,d){null==b&&(b=a.doc.first);
null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;if(d&&c<e.l&&(null==e.ka||e.ka>b)&&(e.ka=b),a.h.Ec=!0,b>=e.l)Aa&&ad(a.doc,b)<e.l&&Ja(a);else if(c<=e.o)Aa&&ie(a.doc,c+d)>e.o?Ja(a):(e.o+=d,e.l+=d);else if(b<=e.o&&c>=e.l)Ja(a);else if(b<=e.o){var f=zc(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.o=f.K,e.l+=d):Ja(a)}else if(c>=e.l)(f=zc(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.l=f.K):Ja(a);else{var f=zc(a,b,b,-1),g=zc(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(qc(a,f.K,g.K)).concat(e.view.slice(g.index)),
e.l+=d):Ja(a)}(a=e.da)&&(c<a.K?a.K+=d:b<a.K+a.size&&(e.da=null))}function Ka(a,b,c){a.h.Ec=!0;var d=a.display,e=a.display.da;(e&&b>=e.K&&b<e.K+e.size&&(d.da=null),b<d.o||b>=d.l)||(a=d.view[Sa(a,b)],null!=a.node&&(a=a.F||(a.F=[]),-1==Z(a,c)&&a.push(c)))}function Ja(a){a.display.o=a.display.l=a.doc.first;a.display.view=[];a.display.Fa=0}function zc(a,b,c,d){var e=Sa(a,b),f=a.display.view;if(!Aa||c==a.doc.first+a.doc.size)return{index:e,K:c};for(var g=a.display.o,h=0;h<e;h++)g+=f[h].size;if(g!=b){if(0<
d){if(e==f.length-1)return null;b=g+f[e].size-b;e++}else b=g-b;c+=b}for(;ad(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,K:c}}function af(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.F||++b}return b}function Ob(a,b){a.doc.aa<a.display.l&&a.state.highlight.set(b,Qc(sg,a))}function sg(a){var b=a.doc;if(!(b.aa>=a.display.l)){var c=+new Date+a.options.workTime,d=Ib(a,b.aa),e=[];b.iter(d.line,Math.min(b.first+b.size,
a.display.l+500),function(f){if(d.line>=a.display.o){var g=f.M,h=f.text.length>a.options.maxHighlightLength?hb(b.mode,d.state):null,k=ne(a,f,d,!0);h&&(d.state=h);f.M=k.M;h=f.ba;(k=k.cc)?f.ba=k:h&&(f.ba=null);k=!g||g.length!=f.M.length||h!=k&&(!h||!k||h.D!=k.D||h.A!=k.A);for(h=0;!k&&h<g.length;++h)k=g[h]!=f.M[h];k&&e.push(d.line);f.S=d.save()}else f.text.length<=a.options.maxHighlightLength&&id(a,f.text,d),f.S=0==d.line%5?d.save():null;d.td();if(+new Date>c)return Ob(a,a.options.workDelay),!0});b.aa=
d.line;b.ga=Math.max(b.ga,d.line);e.length&&na(a,function(){for(var b=0;b<e.length;b++)Ka(a,e[b],"text")})}}function Dd(a,b){var c=a.display,d=a.doc;if(b.ke)return Ja(a),!1;if(!b.force&&b.visible.from>=c.o&&b.visible.to<=c.l&&(null==c.ka||c.ka>=c.l)&&c.vc==c.view&&0==af(a))return!1;Ue(a)&&(Ja(a),b.Xc=Oc(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.o<f&&20>f-c.o&&(f=Math.max(d.first,c.o));c.l>g&&20>c.l-g&&
(g=Math.min(e,c.l));Aa&&(f=ad(a.doc,f),g=ie(a.doc,g));var h,d=f!=c.o||g!=c.l||c.ld!=b.Sd||c.md!=b.Tb;0==(h=a.display).view.length||f>=h.l||g<=h.o?(h.view=qc(a,f,g),h.o=f):(h.o>f?h.view=qc(a,f,h.o).concat(h.view):h.o<f&&(h.view=h.view.slice(Sa(a,f))),h.o=f,h.l<g?h.view=h.view.concat(qc(a,h.l,g)):h.l>g&&(h.view=h.view.slice(0,Sa(a,g))));h.l=g;c.Fa=Ia(D(a.doc,c.o));a.display.Kb.style.top=c.Fa+"px";h=af(a);if(!d&&0==h&&!b.force&&c.vc==c.view&&(null==c.ka||c.ka>=c.l))return!1;g=function(a){if(a.hasFocus())return null;
var b=za();if(!b||!Ea(a.display.v,b))return null;b={Xb:b};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&Ea(a.display.v,c.anchorNode)&&(b.anchorNode=c.anchorNode,b.anchorOffset=c.anchorOffset,b.focusNode=c.focusNode,b.focusOffset=c.focusOffset)}return b}(a);return 4<h&&(c.v.style.display="none"),function(a,b,c){function d(b){var c=b.nextSibling;return aa&&pa&&a.display.he==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var e=a.display,f=a.options.lineNumbers,
g=e.v,h=g.firstChild,k=e.view,e=e.o,l=0;l<k.length;l++){var p=k[l];if(!p.hidden)if(p.node&&p.node.parentNode==g){for(;h!=p.node;)h=d(h);h=f&&null!=b&&b<=e&&p.lineNumber;p.F&&(-1<Z(p.F,"gutter")&&(h=!1),we(a,p,e,c));h&&(ga(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(Wc(a.options,e))));h=p.node.nextSibling}else{var v=(n=e,C=c,void 0,u=xe(q=a,m=p),m.text=m.node=u.ha,u.D&&(m.D=u.D),u.A&&(m.A=u.A),ld(q,m),ye(q,m,n,C),ze(q,m,C),m.node);g.insertBefore(v,h)}e+=p.size}for(var q,m,n,C,u;h;)h=
d(h)}(a,c.ka,b.Xc),4<h&&(c.v.style.display=""),c.vc=c.view,function(a){if(a&&a.Xb&&a.Xb!=za()&&(a.Xb.focus(),a.anchorNode&&Ea(document.body,a.anchorNode)&&Ea(document.body,a.focusNode))){var b=window.getSelection(),c=document.createRange();c.setEnd(a.anchorNode,a.anchorOffset);c.collapse(!1);b.removeAllRanges();b.addRange(c);b.extend(a.focusNode,a.focusOffset)}}(g),ga(c.Z),ga(c.Ob),c.gutters.style.height=c.w.style.minHeight=0,d&&(c.ld=b.Sd,c.md=b.Tb,Ob(a,400)),!(c.ka=null)}function $e(a,b){for(var c=
b.viewport,d=!0;(d&&a.options.lineWrapping&&b.we!=$a(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+nd(a.display)-(a.display.f.clientHeight-Da(a)-a.display.ca),c.top)}),b.visible=Nc(a.display,a.doc,c),!(b.visible.from>=a.display.o&&b.visible.to<=a.display.l)))&&Dd(a,b);d=!1)wc(a),d=Pb(a),Lb(a),mb(a,d),Ed(a,d),b.force=!1;b.signal(a,"update",a);a.display.o==a.display.Fd&&a.display.l==a.display.Gd||(b.signal(a,"viewportChange",a,a.display.o,a.display.l),a.display.Fd=a.display.o,a.display.Gd=a.display.l)}
function Cd(a,b){var c=new u(a,b);if(Dd(a,c)){wc(a);$e(a,c);var d=Pb(a);Lb(a);mb(a,d);Ed(a,d);c.finish()}}function zd(a){a.display.w.style.marginLeft=a.display.gutters.offsetWidth+"px"}function Ed(a,b){a.display.w.style.minHeight=b.ec+"px";a.display.Ab.style.top=b.ec+"px";a.display.gutters.style.height=b.ec+a.display.ca+Da(a)+"px"}function bf(a){var b=a.display.gutters,c=a.options.gutters;ga(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(G("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==
e&&((a.display.Eb=f).style.width=(a.display.tc||1)+"px")}b.style.display=d?"":"none";zd(a)}function Fd(a){var b=Z(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function cf(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,
y:c}}function df(a,b){var c=cf(b),d=c.x,c=c.y,e=a.display,f=e.f,g=f.scrollWidth>f.clientWidth,h=f.scrollHeight>f.clientHeight;if(d&&g||c&&h){if(c&&pa&&aa){var g=b.target,k=e.view;a:for(;g!=f;g=g.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==g){a.display.he=g;break a}}if(d&&!Fa&&!ra&&null!=ka)return c&&h&&Nb(a,Math.max(0,f.scrollTop+c*ka)),Wa(a,Math.max(0,f.scrollLeft+d*ka)),(!c||c&&h)&&ca(b),void(e.oa=null);c&&null!=ka&&(h=c*ka,g=a.doc.scrollTop,k=g+e.g.clientHeight,0>h?g=Math.max(0,g+h-50):
k=Math.min(a.doc.height,k+h+50),Cd(a,{top:g,bottom:k}));20>Ac&&(null==e.oa?(e.oa=f.scrollLeft,e.Sb=f.scrollTop,e.ob=d,e.pb=c,setTimeout(function(){if(null!=e.oa){var a=f.scrollLeft-e.oa,b=f.scrollTop-e.Sb,a=b&&e.pb&&b/e.pb||a&&e.ob&&a/e.ob;e.oa=e.Sb=null;a&&(ka=(ka*Ac+a)/(Ac+1),++Ac)}},200)):(e.ob+=d,e.pb+=c))}}function sa(a,b){var c=a[b];a.sort(function(a,b){return H(a.from(),b.from())});b=Z(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=H(e.to(),d.from())){var f=mc(e.from(),d.from()),g=
lc(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new x(d?g:f,d?f:g))}}return new n(a,b)}function ya(a,b){return new n([new x(a,b||a)],0)}function La(a){return a.text?v(a.from.line+a.text.length-1,K(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function ef(a,b){if(0>H(a,b.from))return a;if(0>=H(a,b.to))return La(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=La(b).ch-b.to.ch),v(c,d)}function Gd(a,b){for(var c=
[],d=0;d<a.c.b.length;d++){var e=a.c.b[d];c.push(new x(ef(e.anchor,b),ef(e.head,b)))}return sa(c,a.c.L)}function ff(a,b,c){return a.line==b.line?v(c.line,a.ch-b.ch+c.ch):v(c.line+(a.line-b.line),a.ch)}function Hd(a){a.doc.mode=fd(a.options,a.doc.Ta);Qb(a)}function Qb(a){a.doc.iter(function(a){a.S&&(a.S=null);a.M&&(a.M=null)});a.doc.ga=a.doc.aa=a.doc.first;Ob(a,100);a.state.modeGen++;a.h&&ja(a)}function gf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==K(b.text)&&(!a.a||a.a.options.wholeLineUpdateBefore)}
function Mc(a,b,c,d){function e(a,c,e){a.text=c;a.S&&(a.S=null);a.M&&(a.M=null);null!=a.order&&(a.order=null);ge(a);$d(a,e);c=d?d(a):1;c!=a.height&&Ga(a,c);!0;da(a,"change",a,b)}function f(a,b){for(var e=[],f=a;f<b;++f)e.push(new m(k[f],c?c[f]:null,d));return e}var g=b.from,h=b.to,k=b.text,l=D(a,g.line),p=D(a,h.line),t=K(k),r=c?c[k.length-1]:null,B=h.line-g.line;b.jc?(a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length)):gf(a,b)?(h=f(0,k.length-1),e(p,p.text,r),B&&a.remove(g.line,B),h.length&&
a.insert(g.line,h)):l==p?1==k.length?e(l,l.text.slice(0,g.ch)+t+l.text.slice(h.ch),r):(B=f(1,k.length-1),B.push(new m(t+l.text.slice(h.ch),r,d)),e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,B)):1==k.length?(e(l,l.text.slice(0,g.ch)+k[0]+p.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,B)):(e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),e(p,t+p.text.slice(h.ch),r),r=f(1,k.length-1),1<B&&a.remove(g.line+1,B-1),a.insert(g.line+1,r));da(a,"change",a,b)}function Xa(a,b,c){!function e(a,g,
h){if(a.X)for(var f=0;f<a.X.length;++f){var l=a.X[f];if(l.doc!=g){var p=h&&l.mb;c&&!p||(b(l.doc,p),e(l.doc,a,p))}}}(a,null,!0)}function tg(a,b){if(b.a)throw Error("This document is already in use.");wd((a.doc=b).a=a);Hd(a);hf(a);a.options.lineWrapping||cd(a);a.options.mode=b.Ta;ja(a)}function hf(a){("rtl"==a.doc.direction?Pa:Oa)(a.display.v,"CodeMirror-rtl")}function fc(a){this.done=[];this.N=[];this.undoDepth=1/0;this.qc=this.Db=0;this.gb=this.hb=this.Bb=this.Cb=null;this.ea=this.Ib=a||1}function Id(a,
b){var c={from:Yc(b.from),to:La(b),text:Ra(a,b.from,b.to)};return jf(a,c,b.from.line,b.to.line+1),Xa(a,function(a){return jf(a,c,b.from.line,b.to.line+1)},!0),c}function kf(a){for(;a.length&&K(a).b;)a.pop()}function lf(a,b,c,d){var e=a.history;e.N.length=0;var f,g,h=+new Date;if((e.Bb==d||e.gb==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&e.qc>h-(a.a?a.a.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))&&(f=e.Bb==d?(kf(e.done),K(e.done)):e.done.length&&!K(e.done).b?K(e.done):1<e.done.length&&
!e.done[e.done.length-2].b?(e.done.pop(),K(e.done)):void 0))g=K(f.F),0==H(b.from,b.to)&&0==H(b.from,g.to)?g.to=La(b):f.F.push(Id(a,b));else for((f=K(e.done))&&f.b||Bc(a.c,e.done),f={F:[Id(a,b)],ea:e.ea},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].b||e.done.shift();e.done.push(c);e.ea=++e.Ib;e.qc=e.Db=h;e.Bb=e.Cb=d;e.gb=e.hb=b.origin;g||Q(a,"historyAdded")}function Bc(a,b){var c=K(b);c&&c.b&&c.xb(a)||b.push(a)}function jf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,
c),Math.min(a.first+a.size,d),function(c){c.s&&((e||(e=b["spans_"+a.id]={}))[f]=c.s);++f})}function ug(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].j.cb?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function mf(a,b){var c;if(c=b["spans_"+a.id]){for(var d=[],e=0;e<b.text.length;++e)d.push(ug(c[e]));c=d}else c=null;d=Zc(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var k=g[h],l=0;l<f.length;++l)if(f[l].j==
k.j)continue a;f.push(k)}}else g&&(c[e]=g)}return c}function pb(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.b)d.push(c?n.prototype.Uc.call(f):f);else{var f=f.F,g=[];d.push({F:g});for(var h=0;h<f.length;++h){var k=f[h],l=void 0;if(g.push({from:k.from,to:k.to,text:k.text}),b)for(var p in k)(l=p.match(/^spans_(\d+)$/))&&-1<Z(b,Number(l[1]))&&(K(g)[p]=k[p],delete k[p])}}}return d}function Jd(a,b,c,d){return d?(a=a.anchor,c&&(d=0>H(b,a),d!=0>H(c,a)?(a=b,b=c):d!=0>H(b,c)&&(b=c)),new x(a,b)):
new x(c||b,b)}function Cc(a,b,c,d,e){null==e&&(e=a.a&&(a.a.display.shift||a.extend));W(a,new n([Jd(a.c.I(),b,c,e)],0),d)}function nf(a,b,c){for(var d=[],e=a.a&&(a.a.display.shift||a.extend),f=0;f<a.c.b.length;f++)d[f]=Jd(a.c.b[f],b[f],null,e);W(a,sa(d,a.c.L),c)}function Kd(a,b,c,d){var e=a.c.b.slice(0);e[b]=c;W(a,sa(e,a.c.L),d)}function of(a,b){var c=a.history.done,d=K(c);d&&d.b?Dc(a,c[c.length-1]=b,void 0):W(a,b,void 0)}function W(a,b,c){Dc(a,b,c);b=a.c;var d=a.a?a.a.h.id:NaN,e,f,g=a.history,h=c&&
c.origin;d==g.Cb||h&&g.hb==h&&(g.qc==g.Db&&g.gb==h||(e=K(g.done),"*"==(f=h.charAt(0))||"+"==f&&e.b.length==b.b.length&&e.somethingSelected()==b.somethingSelected()&&new Date-a.history.Db<=(a.a?a.a.options.historyEventDelay:500)))?g.done[g.done.length-1]=b:Bc(b,g.done);g.Db=+new Date;g.hb=h;g.Cb=d;c&&!1!==c.de&&kf(g.N)}function Dc(a,b,c){var d,e;(ma(a,"beforeSelectionChange")||a.a&&ma(a.a,"beforeSelectionChange"))&&(e={b:(d=b).b,update:function(b){this.b=[];for(var c=0;c<b.length;c++)this.b[c]=new x(I(a,
b[c].anchor),I(a,b[c].head))},origin:c&&c.origin},Q(a,"beforeSelectionChange",a,e),a.a&&Q(a.a,"beforeSelectionChange",a.a,e),b=e.b!=d.b?sa(e.b,e.b.length-1):d);pf(a,qf(a,b,c&&c.ac||(0>H(b.I().head,a.c.I().head)?-1:1),!0));c&&!1===c.scroll||!a.a||lb(a.a)}function pf(a,b){b.xb(a.c)||(a.c=b,a.a&&(a.a.h.Rb=a.a.h.ja=!0,je(a.a)),da(a,"cursorActivity",a))}function rf(a){pf(a,qf(a,a.c,null,!1))}function qf(a,b,c,d){for(var e,f=0;f<b.b.length;f++){var g=b.b[f],h=b.b.length==a.c.b.length&&a.c.b[f],k=Ld(a,g.anchor,
h&&h.anchor,c,d),h=Ld(a,g.head,h&&h.head,c,d);(e||k!=g.anchor||h!=g.head)&&(e||(e=b.b.slice(0,f)),e[f]=new x(k,h))}return e?sa(e,b.L):b}function qb(a,b,c,d,e){var f=D(a,b.line);if(f.s)for(var g=0;g<f.s.length;++g){var h=f.s[g],k=h.j;if((null==h.from||(k.O?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(k.P?h.to>=b.ch:h.to>b.ch))){if(e&&(Q(k,"beforeCursorEnter"),k.cb)){if(f.s){--g;continue}break}if(k.Yb){if(c&&(g=k.find(0>d?1:-1),h=void 0,(0>d?k.P:k.O)&&(g=sf(a,g,-d,g&&g.line==b.line?f:null)),g&&g.line==
b.line&&(h=H(g,c))&&(0>d?0>h:0<h)))return qb(a,g,b,d,e);c=k.find(0>d?-1:1);return(0>d?k.O:k.P)&&(c=sf(a,c,d,c.line==b.line?f:null)),c?qb(a,c,b,d,e):null}}}return b}function Ld(a,b,c,d,e){d=d||1;return qb(a,b,c,d,e)||!e&&qb(a,b,c,d,!0)||qb(a,b,c,-d,e)||!e&&qb(a,b,c,-d,!0)||(a.tb=!0,v(a.first,0))}function sf(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?I(a,v(b.line-1)):null:0<c&&b.ch==(d||D(a,b.line)).text.length?b.line<a.first+a.size-1?v(b.line+1,0):null:new v(b.line,b.ch+c)}function tf(a){a.setSelection(v(a.firstLine(),
0),v(a.lastLine()),ta)}function uf(a,b,c){var d={Kc:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.Kc=!0}};return c&&(d.update=function(b,c,g,h){b&&(d.from=I(a,b));c&&(d.to=I(a,c));g&&(d.text=g);void 0!==h&&(d.origin=h)}),Q(a,"beforeChange",a,d),a.a&&Q(a.a,"beforeChange",a.a,d),d.Kc?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function rb(a,b,c){if(a.a){if(!a.a.h)return U(a.a,rb)(a,b,c);if(a.a.state.suppressEdits)return}if(!(ma(a,"beforeChange")||a.a&&ma(a.a,
"beforeChange"))||(b=uf(a,b,!0)))if(c=vf&&!c&&function(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.s)for(var b=0;b<a.s.length;++b){var c=a.s[b].j;!c.readOnly||d&&-1!=Z(d,c)||(d||(d=[])).push(c)}}),!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>H(g.to,e.from)||0<H(g.from,e.to))){var t=[f,1],r=H(g.from,e.from),B=H(g.to,e.to);(0>r||!c.O&&!r)&&t.push({from:g.from,to:e.from});(0<B||!c.P&&!B)&&t.push({from:e.to,
to:g.to});a.splice.apply(a,t);f+=t.length-3}}}return a}(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)wf(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text,origin:b.origin});else wf(a,b)}function wf(a,b){if(1!=b.text.length||""!=b.text[0]||0!=H(b.from,b.to)){var c=Gd(a,b);lf(a,b,c,a.a?a.a.h.id:NaN);Rb(a,b,c,Zc(a,b));var d=[];Xa(a,function(a,c){c||-1!=Z(d,a.history)||(xf(a.history,b),d.push(a.history));Rb(a,b,null,Zc(a,b))})}}function Ec(a,b,c){var d=a.a&&a.a.state.suppressEdits;if(!d||c){for(var e,f=
a.history,g=a.c,h="undo"==b?f.done:f.N,k="undo"==b?f.N:f.done,l=0;l<h.length&&(e=h[l],c?!e.b||e.xb(a.c):e.b);l++);if(l!=h.length){for(f.gb=f.hb=null;;){if(!(e=h.pop()).b){if(d){h.push(e);return}break}if(Bc(e,k),c&&!e.xb(a.c)){W(a,e,{de:!1});return}g=e}var p=[];Bc(g,k);k.push({F:p,ea:f.ea});f.ea=e.ea||++f.Ib;var t=ma(a,"beforeChange")||a.a&&ma(a.a,"beforeChange");c=function(c){var d=e.F[c];if(d.origin=b,t&&!uf(a,d,!1))return h.length=0,{};p.push(Id(a,d));var f=c?Gd(a,d):K(h);Rb(a,d,f,mf(a,d));!c&&
a.a&&a.a.scrollIntoView({from:d.from,to:La(d)});var g=[];Xa(a,function(a,b){b||-1!=Z(g,a.history)||(xf(a.history,d),g.push(a.history));Rb(a,d,null,mf(a,d))})};for(d=e.F.length-1;0<=d&&!c(d);--d);}}}function yf(a,b){if(0!=b&&(a.first+=b,a.c=new n(jc(a.c.b,function(a){return new x(v(a.anchor.line+b,a.anchor.ch),v(a.head.line+b,a.head.ch))}),a.c.L),a.a)){ja(a.a,a.first,a.first-b,b);for(var c=a.a.display,d=c.o;d<c.l;d++)Ka(a.a,d,"gutter")}}function Rb(a,b,c,d){if(a.a&&!a.a.h)return U(a.a,Rb)(a,b,c,d);
if(b.to.line<a.first)yf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);yf(a,e);b={from:v(a.first,0),to:v(b.to.line+e,b.to.ch),text:[K(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:v(e,D(a,e).text.length),text:[b.text[0]],origin:b.origin});b.Dd=Ra(a,b.from,b.to);c||(c=Gd(a,b));a.a?function(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,B=f.line;a.options.lineWrapping||
(B=M(va(D(d,f.line))),d.iter(B,g.line+1,function(a){if(a==e.fa)return h=!0}));-1<d.c.contains(b.from,b.to)&&je(a);Mc(d,b,c,Me(a));a.options.lineWrapping||(d.iter(B,f.line+b.text.length,function(a){var b=oc(a);b>e.za&&(e.fa=a,e.za=b,e.ya=!0,h=!1)}),h&&(a.h.Dc=!0));(function(a,b){if(a.ga=Math.min(a.ga,b),!(a.aa<b-10)){for(var c=a.first,d=b-1;c<d;d--){var e=D(a,d).S;if(e&&(!(e instanceof gc)||d+e.Qa<b)){c=d+1;break}}a.aa=Math.min(a.aa,c)}})(d,f.line);Ob(a,400);c=b.text.length-(g.line-f.line)-1;b.jc?
ja(a):f.line!=g.line||1!=b.text.length||gf(a.doc,b)?ja(a,f.line,g.line+1,c):Ka(a,f.line,"text");c=ma(a,"changes");if((d=ma(a,"change"))||c)b={from:f,to:g,text:b.text,Dd:b.Dd,origin:b.origin},d&&da(a,"change",a,b),c&&(a.h.ub||(a.h.ub=[])).push(b);a.display.Ba=null}(a.a,b,d):Mc(a,b,d);Dc(a,c,ta)}}function sb(a,b,c,d,e){var f;(d||(d=c),0>H(d,c))&&(c=(f=[d,c])[0],d=f[1]);"string"==typeof b&&(b=a.splitLines(b));rb(a,{from:c,to:d,text:b,origin:e})}function zf(a,b,c,d){for(var e=0;e<a.length;++e){var f=
a[e],g=!0;if(f.b)for(f.fe||((f=a[e]=f.Uc()).fe=!0),g=0;g<f.b.length;g++){var h=f.b[g].anchor,k=b;c<h.line?h.line+=d:k<h.line&&(h.line=k,h.ch=0);h=f.b[g].head;k=b;c<h.line?h.line+=d:k<h.line&&(h.line=k,h.ch=0)}else{for(h=0;h<f.F.length;++h)if(k=f.F[h],c<k.from.line)k.from=v(k.from.line+d,k.from.ch),k.to=v(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}g||(a.splice(0,e+1),e=0)}}}function xf(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;zf(a.done,c,d,e);zf(a.N,c,d,e)}function Sb(a,
b,c,d){var e=b,f=b;return"number"==typeof b?f=D(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=M(b),null==e?null:(d(f,e)&&a.a&&Ka(a.a,e,c),f)}function zb(a){this.m=a;this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function yb(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function tb(a,b,c,d,e){if(d&&d.yc)return function(a,b,c,d,e){(d=Qa(d)).yc=
!1;var f=[tb(a,b,c,d,e)],g=f[0],h=d.pa;return Xa(a,function(a){h&&(d.pa=h.cloneNode(!0));f.push(tb(a,I(a,b),I(a,c),d,e));for(var k=0;k<a.X.length;++k)if(a.X[k].se)return;g=K(f)}),new X(f,g)}(a,b,c,d,e);if(a.a&&!a.a.h)return U(a.a,tb)(a,b,c,d,e);var f=new P(a,e);e=H(b,c);if(d&&Qa(d,f,!1),0<e||0==e&&!1!==f.Oc)return f;if(f.Ed&&(f.collapsed=!0,f.pa=ab("span",[f.Ed],"CodeMirror-widget"),d.mc||f.pa.setAttribute("cm-ignore-events","true"),d.la&&(f.pa.la=!0)),f.collapsed){if(he(a,b.line,b,c,f)||b.line!=
c.line&&he(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");Aa=!0}f.Re&&lf(a,{from:b,to:c,origin:"markText"},a.c,NaN);var g,h=b.line,k=a.a;if(a.iter(h,c.line+1,function(a){var d;k&&f.collapsed&&!k.options.lineWrapping&&va(a)==k.display.fa&&(g=!0);f.collapsed&&h!=b.line&&Ga(a,0);d=new nc(f,h==b.line?b.ch:null,h==c.line?c.ch:null);a.s=a.s?a.s.concat([d]):[d];d.j.attachLine(a);++h}),f.collapsed&&a.iter(b.line,c.line+1,function(b){db(a,b)&&Ga(b,0)}),f.Ve&&
A(f,"beforeCursorEnter",function(){return f.clear()}),f.readOnly&&(vf=!0,(a.history.done.length||a.history.N.length)&&a.clearHistory()),f.collapsed&&(f.id=++Zd,f.Yb=!0),k){if(g&&(k.h.Dc=!0),f.collapsed)ja(k,b.line,c.line+1);else if(f.className||f.title||f.Kd||f.ad||f.Rc)for(d=b.line;d<=c.line;d++)Ka(k,d,"text");f.Yb&&rf(k.doc);da(k,"markerAdded",k,f)}return f}function Af(a){return a.findMarks(v(a.first,0),a.clipPos(v(a.lastLine())),function(a){return a.parent})}function vg(a){function b(b){b=a[b];
var c=[b.I.doc];Xa(b.I.doc,function(a){return c.push(a)});for(var d=0;d<b.Ra.length;d++){var g=b.Ra[d];-1==Z(c,g.doc)&&(g.parent=null,b.Ra.splice(d--,1))}}for(var c=0;c<a.length;c++)b(c)}function wg(a){var b=this;if(Bf(b),!T(b,a)&&!Ca(b.display,a)){ca(a);J&&(Cf=+new Date);var c=Va(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){if(!b.options.allowDropFileTypes||-1!=Z(b.options.allowDropFileTypes,
a.type)){var h=new FileReader;h.onload=U(b,function(){var a=h.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a=""),f[d]=a,++g==e)a={from:c=I(b.doc,c),to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"},rb(b.doc,a),of(b.doc,ya(c,La(a)))});h.readAsText(a)}},k=0;k<e;++k)h(d[k],k);else{if(b.state.draggingText&&-1<b.doc.c.contains(c))return b.state.draggingText(a),void setTimeout(function(){return b.display.input.focus()},20);try{if(h=a.dataTransfer.getData("Text")){if(b.state.draggingText&&
!b.state.draggingText.copy&&(k=b.listSelections()),Dc(b.doc,ya(c,c)),k)for(d=0;d<k.length;++d)sb(b.doc,"",k[d].anchor,k[d].head,"drag");b.replaceSelection(h,"around","paste");b.display.input.focus()}}catch(l){}}}}function Bf(a){a.display.Ia&&(a.display.G.removeChild(a.display.Ia),a.display.Ia=null)}function Df(a){if(document.getElementsByClassName)for(var b=document.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function xg(){var a;Ef||(A(window,"resize",function(){null==
a&&(a=setTimeout(function(){a=null;Df(yg)},100))}),A(window,"blur",function(){return Df(Mb)}),Ef=!0)}function yg(a){var b=a.display;b.$a=b.Ga=b.ab=null;b.wc=!1;a.setSize()}function zg(a){var b,c,d,e,f=a.split(/-(?!$)/);a=f[f.length-1];for(var g=0;g<f.length-1;g++){var h=f[g];if(/^(cmd|meta|m)$/i.test(h))e=!0;else if(/^a(lt)?$/i.test(h))b=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else{if(!/^s(hift)?$/i.test(h))throw Error("Unrecognized modifier name: "+h);d=!0}}return b&&(a="Alt-"+a),c&&(a="Ctrl-"+
a),e&&(a="Cmd-"+a),d&&(a="Shift-"+a),a}function ub(a,b,c,d){var e=(b=Md(b)).call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return ub(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=ub(a,b.fallthrough[e],c,d);if(f)return f}}}function Ff(a){a="string"==typeof a?a:Ma[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Gf(a,b,
c){var d=a;return b.altKey&&"Alt"!=d&&(a="Alt-"+a),(Hf?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a),(Hf?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a),!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a),a}function If(a,b){if(ra&&34==a.keyCode&&a["char"])return!1;var c=Ma[a.keyCode];return null!=c&&!a.Te&&(3==a.keyCode&&a.code&&(c=a.code),Gf(c,a,b))}function Md(a){return"string"==typeof a?Tb[a]:a}function vb(a,b){for(var c=a.doc.c.b,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=H(f.from,K(d).to);){var g=
d.pop();if(0>H(g.from,f.from)){f.from=g.from;break}}d.push(f)}na(a,function(){for(var b=d.length-1;0<=b;b--)sb(a.doc,"",d[b].from,d[b].to,"+delete");lb(a)})}function Nd(a,b,c){b=de(a.text,b+c,c);return 0>b||b>a.text.length?null:b}function Od(a,b,c){a=Nd(a,b.ch,c);return null==a?null:new v(b.line,a,0>c?"after":"before")}function Pd(a,b,c,d,e){if(a&&(a=Ba(c,b.doc.direction))){var f=0>e?K(a):a[0],g=0>e==(1==f.level)?"after":"before";if(0<f.level||"rtl"==b.doc.direction){var h=Ta(b,c);a=0>e?c.text.length-
1:0;var k=qa(b,h,a).top;a=Bb(function(a){return qa(b,h,a).top==k},0>e==(1==f.level)?f.from:f.to-1,a);"before"==g&&(a=Nd(c,a,1))}else a=0>e?f.to:f.from;return new v(d,a,g)}return new v(d,0>e?c.text.length:0,0>e?"before":"after")}function Jf(a,b){var c=D(a.doc,b),d=va(c);return d!=c&&(b=M(d)),Pd(!0,a,d,b,1)}function Kf(a,b){var c=Jf(a,b.line),d=D(a.doc,c.line),e=Ba(d,a.doc.direction);if(e&&0!=e[0].level)return c;d=Math.max(0,d.text.search(/\S/));return v(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d,c.H)}
function Fc(a,b,c){if("string"==typeof b&&!(b=Ub[b]))return!1;a.display.input.wb();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Gc}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Vb(a,b,c,d){var e=a.state.keySeq;if(e){if(Ff(b))return"handled";if(/\'$/.test(b)?a.state.keySeq=null:Ag.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),Lf(a,e+" "+b,c,d))return!0}return Lf(a,b,c,d)}function Lf(a,
b,c,d){a:{for(var e=0;e<a.state.keyMaps.length;e++){var f=ub(b,a.state.keyMaps[e],d,a);if(f){d=f;break a}}d=a.options.extraKeys&&ub(b,a.options.extraKeys,d,a)||ub(b,a.options.keyMap,d,a)}return"multi"==d&&(a.state.keySeq=b),"handled"==d&&da(a,"keyHandled",a,b,c),"handled"!=d&&"multi"!=d||(ca(c),xd(a)),!!d}function Mf(a,b){var c=If(b,!0);return!!c&&(b.shiftKey&&!a.state.keySeq?Vb(a,"Shift-"+c,b,function(b){return Fc(a,b,!0)})||Vb(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.$f)return Fc(a,
b)}):Vb(a,c,b,function(b){return Fc(a,b)}))}function Nf(a){if(this.h.focus=za(),!T(this,a)){J&&11>N&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Mf(this,a);ra&&(Qd=c?b:null,!c&&88==b&&!Bg&&(pa?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.v.className)||function(a){function b(a){18!=a.keyCode&&a.altKey||(Oa(c,"CodeMirror-crosshair"),ia(document,"keyup",b),ia(document,"mouseover",b))}var c=
a.display.v;Pa(c,"CodeMirror-crosshair");A(document,"keyup",b);A(document,"mouseover",b)}(this)}}function Cg(a){if(!(Ca(this.display,a)||T(this,a)||a.ctrlKey&&!a.altKey||pa&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(ra&&b==Qd)return Qd=null,void ca(a);if(!ra||a.which&&!(10>a.which)||!Mf(this,a)){var d,b=String.fromCharCode(null==c?b:c);"\b"==b||Vb(d=this,"'"+b+"'",a,function(a){return Fc(d,a,!0)})||this.display.input.vd(a)}}}function Dg(a){var b=this.display;if(!(T(this,a)||b.V&&b.input.Md()))if(b.input.wb(),
b.shift=a.shiftKey,Ca(b,a))aa||(b.f.draggable=!1,setTimeout(function(){return b.f.draggable=!0},100));else if(!Hc(this,a,"gutterClick",!0)){var c,d=Va(this,a),e=le(a),f=d?(c=+new Date,Wb&&Wb.compare(c,d,e)?(Xb=Wb=null,"triple"):Xb&&Xb.compare(c,d,e)?(Wb=new L(c,d,e),Xb=null,"double"):(Xb=new L(c,d,e),Wb=null,"single")):"single";window.focus();1==e&&this.state.selectingText&&this.state.selectingText(a);d&&function(a,b,c,d,e){var f="Click";"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f);return Vb(a,
Gf(f=(1==b?"Left":2==b?"Middle":"Right")+f,e),e,function(b){if("string"==typeof b&&(b=Ub[b]),!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d=b(a,c)!=Gc}finally{a.state.suppressEdits=!1}return d})}(this,e,d,f,a)||(1==e?d?function(a,b,c,d){J?setTimeout(Qc(Qe,a),0):a.h.focus=za();var e,f=function(a,b,c){var d=a.getOption("configureMouse"),d=d?d(a,b,c):{};null==d.Ea&&(d.Ea=(Eg?c.shiftKey&&c.metaKey:c.altKey)?"rectangle":"single"==b?"char":"double"==b?"word":"line");(null==d.extend||
a.doc.extend)&&(d.extend=a.doc.extend||c.shiftKey);null==d.Ya&&(d.Ya=pa?c.metaKey:c.ctrlKey);null==d.qd&&(d.qd=!(pa?c.altKey:c.ctrlKey));return d}(a,c,d),g=a.doc.c;a.options.dragDrop&&Fg&&!a.isReadOnly()&&"single"==c&&-1<(e=g.contains(b))&&(0>H((e=g.b[e]).from(),b)||0<b.Ub)&&(0<H(e.to(),b)||0>b.Ub)?function(a,b,c,d){function e(){return h=!0}function f(a){h=h||10<=Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)}var g=a.display,h=!1,k=U(a,function(b){aa&&(g.f.draggable=!1);a.state.draggingText=
!1;ia(g.g.ownerDocument,"mouseup",k);ia(g.g.ownerDocument,"mousemove",f);ia(g.f,"dragstart",e);ia(g.f,"drop",k);h||(ca(b),d.Ya||Cc(a.doc,c,null,null,d.extend),aa||J&&9==N?setTimeout(function(){g.g.ownerDocument.body.focus();g.input.focus()},20):g.input.focus())});aa&&(g.f.draggable=!0);(a.state.draggingText=k).copy=!d.qd;g.f.dragDrop&&g.f.dragDrop();A(g.g.ownerDocument,"mouseup",k);A(g.g.ownerDocument,"mousemove",f);A(g.f,"dragstart",e);A(g.f,"drop",k);Re(a);setTimeout(function(){return g.input.focus()},
20)}(a,d,b,f):function(a,b,c,d){function e(b){if(0!=H(r,b))if(r=b,"rectangle"==d.Ea){for(var e=[],f=a.options.tabSize,g=la(D(h,c.line).text,c.ch,f),B=la(D(h,b.line).text,b.ch,f),t=Math.min(g,B),g=Math.max(g,B),B=Math.min(c.line,b.line),m=Math.min(a.lastLine(),Math.max(c.line,b.line));B<=m;B++){var q=D(h,B).text,u=Rc(q,t,f);t==g?e.push(new x(v(B,u),v(B,u))):q.length>u&&e.push(new x(v(B,u),v(B,Rc(q,g,f))))}e.length||e.push(new x(c,c));W(h,sa(p.b.slice(0,l).concat(e),l),{origin:"*mouse",scroll:!1});
a.scrollIntoView(b)}else f=k,t=Of(a,b,d.Ea),b=f.anchor,b=0<H(t.anchor,b)?(e=t.head,mc(f.from(),t.anchor)):(e=t.anchor,lc(f.to(),t.head)),f=p.b.slice(0),f[l]=function(a,b){var c=b.anchor,d=b.head,e=D(a.doc,c.line);if(0==H(c,d)&&c.H==d.H)return b;e=Ba(e);if(!e)return b;var f=Fb(e,c.ch,c.H),g=e[f];if(g.from!=c.ch&&g.to!=c.ch)return b;var h,k=f+(g.from==c.ch==(1!=g.level)?0:1);if(0==k||k==e.length)return b;d.line!=c.line?h=0<(d.line-c.line)*("ltr"==a.doc.direction?1:-1):(h=Fb(e,d.ch,d.H),f=h-f||(d.ch-
c.ch)*(1==g.level?-1:1),h=h==k-1||h==k?0>f:0<f);e=e[k+(h?-1:0)];e=(k=h==(1==e.level))?e.from:e.to;k=k?"after":"before";return c.ch==e&&c.H==k?b:new x(new v(c.line,e,k),d)}(a,new x(I(h,b),e)),W(h,sa(f,l),Rd)}function f(b){a.state.selectingText=!1;m=1/0;ca(b);g.input.focus();ia(g.g.ownerDocument,"mousemove",q);ia(g.g.ownerDocument,"mouseup",u);h.history.hb=null}var g=a.display,h=a.doc;ca(b);var k,l,p=h.c,B=p.b;d.Ya&&!d.extend?(l=h.c.contains(c),k=-1<l?B[l]:new x(c,c)):(k=h.c.I(),l=h.c.L);"rectangle"==
d.Ea?(d.Ya||(k=new x(c,c)),c=Va(a,b,!0,!0),l=-1):(b=Of(a,c,d.Ea),k=d.extend?Jd(k,b.anchor,b.head,d.extend):b);d.Ya?-1==l?(l=B.length,W(h,sa(B.concat([k]),l),{scroll:!1,origin:"*mouse"})):1<B.length&&B[l].empty()&&"char"==d.Ea&&!d.extend?(W(h,sa(B.slice(0,l).concat(B.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),p=h.c):Kd(h,l,k,Rd):(W(h,new n([k],l=0),Rd),p=h.c);var r=c,t=g.g.getBoundingClientRect(),m=0,q=U(a,function(b){0!==b.buttons&&le(b)?function Pe(b){var c=++m,f=Va(a,b,!0,"rectangle"==d.Ea);if(f)if(0!=
H(f,r)){a.h.focus=za();e(f);var k=Nc(g,h);(f.line>=k.to||f.line<k.from)&&setTimeout(U(a,function(){m==c&&Pe(b)}),150)}else{var l=b.clientY<t.top?-20:b.clientY>t.bottom?20:0;l&&setTimeout(U(a,function(){m==c&&(g.f.scrollTop+=l,Pe(b))}),50)}}(b):f(b)}),u=U(a,f);a.state.selectingText=u;A(g.g.ownerDocument,"mousemove",q);A(g.g.ownerDocument,"mouseup",u)}(a,d,b,f)}(this,d,f,a):(a.target||a.srcElement)==b.f&&ca(a):2==e?(d&&Cc(this.doc,d),setTimeout(function(){return b.input.focus()},20)):3==e&&(Sd?Pf(this,
a):Re(this)))}}function Of(a,b,c){if("char"==c)return new x(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new x(v(b.line,0),I(a.doc,v(b.line+1,0)));a=c(a,b);return new x(a.from,a.to)}function Hc(a,b,c,d){var e,f;if(b.touches)e=b.touches[0].clientX,f=b.touches[0].clientY;else try{e=b.clientX,f=b.clientY}catch(k){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&ca(b);d=a.display;var g=d.v.getBoundingClientRect();if(f>g.bottom||!ma(a,c))return dd(b);
f-=g.top-d.Fa;for(g=0;g<a.options.gutters.length;++g){var h=d.gutters.childNodes[g];if(h&&h.getBoundingClientRect().right>=e)return Q(a,c,a,bb(a.doc,f),a.options.gutters[g],b),dd(b)}}function Pf(a,b){Ca(a.display,b)||ma(a,"gutterContextMenu")&&Hc(a,b,"gutterContextMenu",!1)||T(a,b,"contextmenu")||a.display.input.ud(b)}function Qf(a){a.display.g.className=a.display.g.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");sc(a)}function Yb(a){bf(a);ja(a);Te(a)}function Gg(a,
b,c){!b!=!(c&&c!=wb)&&(c=a.display.ie,b=b?A:ia,b(a.display.f,"dragstart",c.start),b(a.display.f,"dragenter",c.me),b(a.display.f,"dragover",c.ze),b(a.display.f,"dragleave",c.te),b(a.display.f,"drop",c.je))}function Hg(a){a.options.lineWrapping?(Pa(a.display.g,"CodeMirror-wrap"),a.display.w.style.minWidth="",a.display.zc=null):(Oa(a.display.g,"CodeMirror-wrap"),cd(a));wd(a);ja(a);sc(a);setTimeout(function(){return mb(a)},100)}function y(a,b){var c=this;if(!(this instanceof y))return new y(a,b);this.options=
b=b?Qa(b):{};Qa(Rf,b,!1);Fd(b);var d=b.value;"string"==typeof d?d=new F(d,b.mode,null,b.lineSeparator,b.direction):b.mode&&(d.Ta=b.mode);this.doc=d;var e=new y.inputStyles[b.inputStyle](this),e=this.display=new eg(a,d,e),f;for(f in bf(e.g.CodeMirror=this),Qf(this),b.lineWrapping&&(this.display.g.className+=" CodeMirror-wrap"),Ye(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,
highlight:new Na,keySeq:null,specialChars:null},b.autofocus&&!Cb&&e.input.focus(),J&&11>N&&setTimeout(function(){return c.display.input.reset(!0)},20),function(a){function b(){d.V&&(e=setTimeout(function(){return d.V=null},1E3),(f=d.V).end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return 400<c*c+d*d}var d=a.display;A(d.f,"mousedown",U(a,Dg));A(d.f,"dblclick",J&&11>N?U(a,function(b){if(!T(a,b)){var c=Va(a,b);!c||Hc(a,b,"gutterClick",!0)||Ca(a.display,b)||
(ca(b),b=a.findWordAt(c),Cc(a.doc,b.anchor,b.head))}}):function(b){return T(a,b)||ca(b)});Sd||A(d.f,"contextmenu",function(b){return Pf(a,b)});var e,f={end:0};A(d.f,"touchstart",function(b){var c;if(c=!T(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),c=!c;c&&!Hc(a,b,"gutterClick",!0)&&(d.input.wb(),clearTimeout(e),c=+new Date,d.V={start:c,rd:!1,ma:300>=c-f.end?f:null},1==b.touches.length&&(d.V.left=b.touches[0].pageX,d.V.top=b.touches[0].pageY))});A(d.f,"touchmove",function(){d.V&&
(d.V.rd=!0)});A(d.f,"touchend",function(e){var f=d.V;if(f&&!Ca(d,e)&&null!=f.left&&!f.rd&&300>new Date-f.start){var g=a.coordsChar(d.V,"page"),f=!f.ma||c(f,f.ma)?new x(g,g):!f.ma.ma||c(f,f.ma.ma)?a.findWordAt(g):new x(v(g.line,0),I(a.doc,v(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();ca(e)}b()});A(d.f,"touchcancel",b);A(d.f,"scroll",function(){d.f.clientHeight&&(Nb(a,d.f.scrollTop),Wa(a,d.f.scrollLeft,!0),Q(a,"scroll",a))});A(d.f,"mousewheel",function(b){return df(a,b)});A(d.f,"DOMMouseScroll",
function(b){return df(a,b)});A(d.g,"scroll",function(){return d.g.scrollTop=d.g.scrollLeft=0});d.ie={me:function(b){T(a,b)||Hb(b)},ze:function(b){if(!T(a,b)){var c=Va(a,b);if(c){var d=document.createDocumentFragment();Oe(a,c,d);a.display.Ia||(a.display.Ia=G("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.G.insertBefore(a.display.Ia,a.display.Z));ha(a.display.Ia,d)}!0;Hb(b)}},start:function(b){if(J&&(!a.state.draggingText||100>+new Date-Cf))Hb(b);else if(!T(a,b)&&!Ca(a.display,b)&&
(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!Sf)){var c=G("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";ra&&(c.width=c.height=1,a.display.g.appendChild(c),c.Qe=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);ra&&c.parentNode.removeChild(c)}},je:U(a,wg),te:function(b){T(a,b)||Bf(a)}};var g=d.input.eb();A(g,"keyup",function(b){16==b.keyCode&&
(a.doc.c.shift=!1);T(a,b)});A(g,"keydown",U(a,Nf));A(g,"keypress",U(a,Cg));A(g,"focus",function(b){return yd(a,b)});A(g,"blur",function(b){return Mb(a,b)})}(this),xg(),nb(this),this.h.ta=!0,tg(this,d),b.autofocus&&!Cb||this.hasFocus()?setTimeout(Qc(yd,this),20):Mb(this),Ic)Ic.hasOwnProperty(f)&&Ic[f](c,b[f],wb);Ue(this);b.cd&&b.cd(this);for(d=0;d<Td.length;++d)Td[d](c);ob(this);aa&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(e.v).Me&&(e.v.style.Me="auto")}function Zb(a,b,c,d){var e,f=a.doc;
null==c&&(c="add");"smart"==c&&(f.mode.va?e=Ib(a,b).state:c="prev");var g=a.options.tabSize,h=D(f,b),k=la(h.text,null,g);h.S&&(h.S=null);var l,p=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&((l=f.mode.va(e,h.text.slice(p.length),h.text))==Gc||150<l)){if(!d)return;c="prev"}}else l=0,c="not";"prev"==c?l=b>f.first?la(D(f,b-1).text,null,g):0:"add"==c?l=k+a.options.indentUnit:"subtract"==c?l=k-a.options.indentUnit:"number"==typeof c&&(l=k+c);l=Math.max(0,l);c="";d=0;if(a.options.indentWithTabs)for(a=
Math.floor(l/g);a;--a)d+=g,c+="\t";if(d<l&&(c+=Sc(l-d)),c!=p)return sb(f,c,v(b,0),v(b,p.length),"+input"),!(h.S=null);for(g=0;g<f.c.b.length;g++)if(h=f.c.b[g],h.head.line==b&&h.head.ch<p.length){b=v(b,p.length);Kd(f,g,new x(b,b));break}}function Ud(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.c);var g,h=a.state.pasteIncoming||"paste"==e,k=Vd(b),l=null;if(h&&1<d.b.length)if(fa&&fa.text.join("\n")==b){if(0==d.b.length%fa.text.length)for(var l=[],p=0;p<fa.text.length;p++)l.push(f.splitLines(fa.text[p]))}else k.length==
d.b.length&&a.options.dg&&(l=jc(k,function(a){return[a]}));for(p=d.b.length-1;0<=p;p--){g=d.b[p];var t=g.from(),r=g.to();g.empty()&&(c&&0<c?t=v(t.line,t.ch-c):a.state.overwrite&&!h?r=v(r.line,Math.min(D(f,r.line).text.length,r.ch+K(k).length)):fa&&fa.Gb&&fa.text.join("\n")==b&&(t=r=v(t.line,0)));g=a.h.Rb;t={from:t,to:r,text:l?l[p%l.length]:k,origin:e||(h?"paste":a.state.cutIncoming?"cut":"+input")};rb(a.doc,t);da(a,"inputRead",a,t)}b&&!h&&Ig(a,b);lb(a);a.h.Rb=g;a.h.Pd=!0;a.state.pasteIncoming=a.state.cutIncoming=
!1}function Tf(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||na(b,function(){return Ud(b,c,0,null,"paste")}),!0}function Ig(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.c,d=c.b.length-1;0<=d;d--){var e=c.b[d];if(!(100<e.head.ch||d&&c.b[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=
Zb(a,e.head.line,"smart");break}}else f.le&&f.le.test(D(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Zb(a,e.head.line,"smart"));g&&da(a,"electricInput",a,e.head.line)}}}function Uf(a){for(var b=[],c=[],d=0;d<a.doc.c.b.length;d++){var e=a.doc.c.b[d].head.line,e={anchor:v(e,0),head:v(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,b:c}}function Vf(a,b){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck",!!b)}function Wf(){var a=
G("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=G("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return aa?a.style.width="1000px":a.setAttribute("wrap","off"),$b&&(a.style.border="1px solid black"),Vf(a),b}function Xf(a,b,c,d,e){function f(d){var f,g;if(null==(f=e?function(a,b,c,d){function e(a,b,d){for(;0<=a&&a<h.length;a+=b){var e=h[a],f=0<b==(1!=e.level),k=f?d.ra:g(d.end,-1);if(e.from<=k&&k<e.to||
(k=f?e.from:g(e.to,-1),d.ra<=k&&k<d.end))return a=k,f?new v(c.line,g(a,1),"before"):new v(c.line,a,"after")}}function f(c){return a.options.lineWrapping?(p=p||Ta(a,b),Le(a,b,p,c)):{ra:0,end:b.text.length}}function g(a,c){return Nd(b,a instanceof v?a.ch:a,c)}var h=Ba(b,a.doc.direction);if(!h)return Od(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.H="before"):0>=c.ch&&(c.ch=0,c.H="after");var k=Fb(h,c.ch,c.H),l=h[k];if("ltr"==a.doc.direction&&0==l.level%2&&(0<d?l.to>c.ch:l.from<c.ch))return Od(b,
c,d);var p,t=f("before"==c.H?g(c,-1):c.ch);if("rtl"==a.doc.direction||1==l.level){var r=1==l.level==0>d,m=g(c,r?1:-1);if(null!=m&&(r?m<=l.to&&m<=t.end:m>=l.from&&m>=t.ra))return new v(c.line,m,r?"before":"after")}if(k=e(k+d,d,t))return k;t=0<d?t.end:g(t.ra,-1);return null==t||0<d&&t==b.text.length||!(k=e(0<d?0:h.length-1,d,f(t)))?null:k}(a.a,k,b,c):Od(k,b,c))){if(d||(g=b.line+c)<a.first||g>=a.first+a.size||(b=new v(g,b.ch,b.H),!(k=D(a,g))))return!1;b=Pd(e,a.a,k,b.line,c)}else b=f;return!0}var g=b,
h=c,k=D(a,b.line);if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var l=null;d="group"==d;for(var p=a.a&&a.a.getHelper(b,"wordChars"),t=!0;!(0>c)||f(!t);t=!1){var r=k.text.charAt(b.ch)||"\n",r=kc(r,p)?"w":d&&"\n"==r?"n":!d||/\s/.test(r)?null:"p";if(!d||t||r||(r="s"),l&&l!=r){0>c&&(c=1,f(),b.H="after");break}if(r&&(l=r),0<c&&!f(!t))break}}h=Ld(a,b,g,h,!0);return Xc(g,h)&&(h.qe=!0),h}function Yf(a,b){var c=De(a,b.line);if(!c||c.hidden)return null;var d=D(a.doc,b.line),c=Ce(c,
d,b.line),d=Ba(d,a.doc.direction),e="left";d&&(e=Fb(d,b.ch)%2?"right":"left");c=Ee(c.map,b.ch,e);return c.offset="right"==c.collapse?c.end:c.start,c}function xb(a,b){return b&&(a.sb=!0),a}function Jc(a,b,c){var d;if(b==a.display.v){if(!(d=a.display.v.childNodes[c]))return xb(a.clipPos(v(a.display.l-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.v)return null;if(d.parentNode&&d.parentNode==a.display.v)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==
d)return Jg(f,b,c)}}function Jg(a,b,c){function d(b,c,d){for(var e=-1;e<(l?l.length:0);e++)for(var f=0>e?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c)return c=M(0>e?a.line:a.C[e]),e=f[g]+d,(0>d||h!=b)&&(e=f[g+(d?1:0)]),v(c,e)}}var e=a.text.firstChild,f=!1;if(!b||!Ea(e,b))return xb(v(M(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.C?K(a.C):a.line,xb(v(M(c),c.text.length),f);var g=3==b.nodeType?b:null,h=b;for(g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=
b.firstChild,c&&(c=g.nodeValue.length));h.parentNode!=e;)h=h.parentNode;var k=a.measure,l=k.xa;if(b=d(g,h,c))return xb(b,f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return xb(v(b.line,b.ch-g),f);g+=e.textContent.length}for(h=h.previousSibling;h;h=h.previousSibling){if(b=d(h,h.firstChild,-1))return xb(v(b.line,b.ch+c),f);c+=h.textContent.length}}var ba=navigator.userAgent,Zf=navigator.platform,Fa=/gecko\/\d/i.test(ba),$f=/MSIE \d/.test(ba),ag=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ba),
ac=/Edge\/(\d+)/.exec(ba),J=$f||ag||ac,N=J&&($f?document.documentMode||6:+(ac||ag)[1]),aa=!ac&&/WebKit\//.test(ba),Kg=aa&&/Qt\/\d+\.\d+/.test(ba),tc=!ac&&/Chrome\//.test(ba),ra=/Opera\//.test(ba),Sf=/Apple Computer/.test(navigator.vendor),Lg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ba),rg=/PhantomJS/.test(ba),$b=!ac&&/AppleWebKit/.test(ba)&&/Mobile\/\w+/.test(ba),uc=/Android/.test(ba),Cb=$b||uc||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ba),pa=$b||/Mac/.test(Zf),Eg=/\bCrOS\b/.test(ba),Mg=
/win/i.test(Zf),Ya=ra&&ba.match(/Version\/(\d*\.\d*)/);Ya&&(Ya=Number(Ya[1]));Ya&&15<=Ya&&(aa=!(ra=!1));var Hf=pa&&(Kg||ra&&(null==Ya||12.11>Ya)),Sd=Fa||J&&9<=N,ib;ib=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};$b?Ab=function(a){a.selectionStart=0;
a.selectionEnd=a.value.length}:J&&(Ab=function(a){try{a.select()}catch(b){}});Na.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var Gc={toString:function(){return"CodeMirror.Pass"}},ta={scroll:!1},Rd={origin:"*mouse"},bc={origin:"+move"},ic=[""],cg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,dg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
vf=!1,Aa=!1,Gb=null,fg=function(){function a(a,b,c){this.level=a;this.from=b;this.to=c}var b=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,d=/[LRr]/,e=/[Lb1n]/,f=/[1n]/;return function(g,h){var k="ltr"==h?"L":"R";if(0==g.length||"ltr"==h&&!b.test(g))return!1;for(var l,p=g.length,t=[],r=0;r<p;++r)t.push(247>=(l=g.charCodeAt(r))?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):
1424<=l&&1524>=l?"R":1536<=l&&1785>=l?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&2220>=l?"r":8192<=l&&8203>=l?"w":8204==l?"b":"L");l=0;for(r=k;l<p;++l){var m=t[l];"m"==m?t[l]=r:r=m}l=0;for(r=k;l<p;++l)m=t[l],"1"==m&&"r"==r?t[l]="n":d.test(m)&&"r"==(r=m)&&(t[l]="R");l=
1;for(r=t[0];l<p-1;++l)m=t[l],"+"==m&&"1"==r&&"1"==t[l+1]?t[l]="1":","!=m||r!=t[l+1]||"1"!=r&&"n"!=r||(t[l]=r),r=m;for(l=0;l<p;++l)if(r=t[l],","==r)t[l]="N";else if("%"==r){for(r=l+1;r<p&&"%"==t[r];++r);for(m=l&&"!"==t[l-1]||r<p&&"1"==t[r]?"1":"N";l<r;++l)t[l]=m;l=r-1}l=0;for(r=k;l<p;++l)m=t[l],"L"==r&&"1"==m?t[l]="L":d.test(m)&&(r=m);for(r=0;r<p;++r)if(c.test(t[r])){for(l=r+1;l<p&&c.test(t[l]);++l);m="L"==(r?t[r-1]:k);for(m=m==("L"==(l<p?t[l]:k))?m?"L":"R":k;r<l;++r)t[r]=m;r=l-1}var q,k=[];for(l=
0;l<p;)if(e.test(t[l])){r=l;for(++l;l<p&&e.test(t[l]);++l);k.push(new a(0,r,l))}else{var v=l,r=k.length;for(++l;l<p&&"L"!=t[l];++l);for(m=v;m<l;)if(f.test(t[m])){v<m&&k.splice(r,0,new a(1,v,m));v=m;for(++m;m<l&&f.test(t[m]);++m);k.splice(r,0,new a(2,v,m));v=m}else++m;v<l&&k.splice(r,0,new a(1,v,l))}return"ltr"==h&&(1==k[0].level&&(q=g.match(/^\s+/))&&(k[0].from=q[0].length,k.unshift(new a(0,0,q[0].length))),1==K(k).level&&(q=g.match(/\s+$/))&&(K(k).to-=q[0].length,k.push(new a(0,p-q[0].length,p)))),
"rtl"==h?k.reverse():k}}(),hc=[],ed,kd,Fg=function(){if(J&&9>N)return!1;var a=G("div");return"draggable"in a||"dragDrop"in a}(),Wd,Vd=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Ng=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:
function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(c){}return!(!b||b.parentElement()!=a)&&0!=b.compareEndPoints("StartToEnd",b)},Bg="oncopy"in(Wd=G("div"))||(Wd.setAttribute("oncopy","return;"),"function"==typeof Wd.oncopy),od=null,gd={},fb={},gb={};Y.prototype.eol=function(){return this.i>=this.string.length};Y.prototype.sol=function(){return this.i==this.ib};Y.prototype.peek=function(){return this.string.charAt(this.i)||void 0};Y.prototype.next=function(){if(this.i<this.string.length)return this.string.charAt(this.i++)};
Y.prototype.eat=function(a){var b=this.string.charAt(this.i);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.i,b};Y.prototype.eatWhile=function(a){for(var b=this.i;this.eat(a););return this.i>b};Y.prototype.eatSpace=function(){for(var a=this.i;/[\s\u00a0]/.test(this.string.charAt(this.i));)++this.i;return this.i>a};Y.prototype.skipToEnd=function(){this.i=this.string.length};Y.prototype.skipTo=function(a){a=this.string.indexOf(a,this.i);if(-1<a)return this.i=a,!0};Y.prototype.column=
function(){return this.oc<this.start&&(this.pc=la(this.string,this.start,this.tabSize,this.oc,this.pc),this.oc=this.start),this.pc-(this.ib?la(this.string,this.ib,this.tabSize):0)};Y.prototype.indentation=function(){return la(this.string,null,this.tabSize)-(this.ib?la(this.string,this.ib,this.tabSize):0)};Y.prototype.match=function(a,b,c){if("string"!=typeof a)return(a=this.string.slice(this.i).match(a))&&0<a.index?null:(a&&!1!==b&&(this.i+=a[0].length),a);var d=this.string.substr(this.i,a.length);
if((c?d.toLowerCase():d)==(c?a.toLowerCase():a))return!1!==b&&(this.i+=a.length),!0};Y.prototype.current=function(){return this.string.slice(this.start,this.i)};Y.prototype.Qa=function(a){var b=this.ue;return b&&b.Qa(a)};q.prototype.Qa=function(a){var b=this.doc.getLine(this.line+a);return null!=b&&a>this.Sa&&(this.Sa=a),b};q.prototype.td=function(){this.line++;0<this.Sa&&this.Sa--};q.oe=function(a,b,c){return b instanceof gc?new q(a,hb(a.mode,b.state),c,b.Qa):new q(a,hb(a.mode,b),c)};q.prototype.save=
function(a){a=!1!==a?hb(this.doc.mode,this.state):this.state;return 0<this.Sa?new gc(a,this.Sa):a};eb(m);var ig={},hg={},jb=null,Jb=null,Ua,Fe={left:0,right:0,top:0,bottom:0};ua.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.Ua;c?(this.U.style.display="block",this.U.style.bottom=b?d+"px":"0",this.U.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+(a.Ne-(b?d:0)))+"px"):(this.U.style.display="",this.U.firstChild.style.height="0");
b?(this.J.style.display="block",this.J.style.right=c?d+"px":"0",this.J.style.left=a.Hc+"px",this.J.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.Oe-a.Hc-(c?d:0)))+"px"):(this.J.style.display="",this.J.firstChild.style.width="0");return!this.Mc&&0<a.clientHeight&&(0==d&&this.Pe(),this.Mc=!0),{right:c?d:0,bottom:b?d:0}};ua.prototype.xc=function(a){this.J.scrollLeft!=a&&(this.J.scrollLeft=a);this.Yc&&this.$c(this.J,this.Yc,"horiz")};ua.prototype.Pb=function(a){this.U.scrollTop!=a&&
(this.U.scrollTop=a);this.Zc&&this.$c(this.U,this.Zc,"vert")};ua.prototype.Pe=function(){this.J.style.height=this.U.style.width=pa&&!Lg?"12px":"18px";this.J.style.pointerEvents=this.U.style.pointerEvents="none";this.Yc=new Na;this.Zc=new Na};ua.prototype.$c=function(a,b,c){a.style.pointerEvents="auto";b.set(1E3,function e(){var f=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(f.right-1,(f.top+f.bottom)/2):document.elementFromPoint((f.right+f.left)/2,f.bottom-1))!=a?a.style.pointerEvents=
"none":b.set(1E3,e)})};ua.prototype.clear=function(){var a=this.J.parentNode;a.removeChild(this.J);a.removeChild(this.U)};E.prototype.update=function(){return{bottom:0,right:0}};E.prototype.xc=function(){};E.prototype.Pb=function(){};E.prototype.clear=function(){};var Ze={"native":ua,"null":E},pg=0;u.prototype.signal=function(a,b){ma(a,b)&&this.gc.push(arguments)};u.prototype.finish=function(){for(var a=0;a<this.gc.length;a++)Q.apply(null,this.gc[a])};var Ac=0,ka=null;J?ka=-.53:Fa?ka=15:tc?ka=-.7:
Sf&&(ka=-1/3);n.prototype.I=function(){return this.b[this.L]};n.prototype.xb=function(a){if(a==this)return!0;if(a.L!=this.L||a.b.length!=this.b.length)return!1;for(var b=0;b<this.b.length;b++){var c=this.b[b],d=a.b[b];if(!Xc(c.anchor,d.anchor)||!Xc(c.head,d.head))return!1}return!0};n.prototype.Uc=function(){for(var a=[],b=0;b<this.b.length;b++)a[b]=new x(Yc(this.b[b].anchor),Yc(this.b[b].head));return new n(a,this.L)};n.prototype.somethingSelected=function(){for(var a=0;a<this.b.length;a++)if(!this.b[a].empty())return!0;
return!1};n.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.b.length;c++){var d=this.b[c];if(0<=H(b,d.from())&&0>=H(a,d.to()))return c}return-1};x.prototype.from=function(){return mc(this.anchor,this.head)};x.prototype.to=function(){return lc(this.anchor,this.head)};x.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};zb.prototype={chunkSize:function(){return this.m.length},removeInner:function(a,b){for(var c,d=a,e=a+b;d<e;++d){var f=this.m[d];
this.height-=f.height;(c=f).parent=null;ge(c);da(f,"delete")}this.m.splice(a,b)},collapse:function(a){a.push.apply(a,this.m)},insertInner:function(a,b,c){this.height+=c;this.m=this.m.slice(0,a).concat(b).concat(this.m.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.m[a]))return!0}};yb.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();
if(a<e){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof zb))&&(c=[],this.collapse(c),this.children=[new zb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=
this.children[d],f=e.chunkSize();if(a<=f){if(e.insertInner(a,b,c),e.m&&50<e.m.length){for(b=a=e.m.length%25+25;b<e.m.length;)c=new zb(e.m.slice(b,b+=25)),e.height-=c.height,this.children.splice(++d,0,c),c.parent=this;e.m=e.m.slice(0,a);this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=new yb(a.children.splice(a.children.length-5,5));if(a.parent)a.size-=b.size,a.height-=b.height,a.parent.children.splice(Z(a.parent.children,a)+1,0,b);else{var c=
new yb(a.children);(c.parent=a).children=[c,b];a=c}b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};O.prototype.clear=function(){var a=this.doc.a,b=this.line.B,c=this.line,d=M(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.B=null);var f=md(this);Ga(c,
Math.max(0,c.height-f));a&&(na(a,function(){var b=-f;Ia(c)<(a.h&&a.h.scrollTop||a.doc.scrollTop)&&Bd(a,b);Ka(a,d,"widget")}),da(a,"lineWidgetCleared",a,this,d))}};eb(O);var Zd=0;P.prototype.clear=function(){if(!this.cb){var a=this.doc.a,b=a&&!a.h;if(b&&nb(a),ma(this,"clear")){var c=this.find();c&&da(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.m.length;++e){var f=this.m[e],g=Eb(f.s,this);a&&!this.collapsed?Ka(a,M(f),"text"):a&&(null!=g.to&&(d=M(f)),null!=g.from&&(c=M(f)));for(var h=f,k=f.s,
l=g,p=void 0,m=0;m<k.length;++m)k[m]!=l&&(p||(p=[])).push(k[m]);h.s=p;null==g.from&&this.collapsed&&!db(this.doc,f)&&a&&Ga(f,kb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.m.length;++e)f=va(this.m[e]),g=oc(f),g>a.display.za&&(a.display.fa=f,a.display.za=g,a.display.ya=!0);null!=c&&a&&this.collapsed&&ja(a,c,d+1);this.m.length=0;this.cb=!0;this.Yb&&this.doc.tb&&(this.doc.tb=!1,a&&rf(a.doc));a&&da(a,"markerCleared",a,this,c,d);b&&ob(a);this.parent&&this.parent.clear()}};
P.prototype.find=function(a,b){var c,d;null==a&&"bookmark"==this.type&&(a=1);for(var e=0;e<this.m.length;++e){var f=this.m[e],g=Eb(f.s,this);if(null!=g.from&&(c=v(b?f:M(f),g.from),-1==a))return c;if(null!=g.to&&(d=v(b?f:M(f),g.to),1==a))return d}return c&&{from:c,to:d}};P.prototype.attachLine=function(a){if(!this.m.length&&this.doc.a){var b=this.doc.a.h;b.Jb&&-1!=Z(b.Jb,this)||(b.od||(b.od=[])).push(this)}this.m.push(a)};P.prototype.detachLine=function(a){if(this.m.splice(Z(this.m,a),1),!this.m.length&&
this.doc.a)a=this.doc.a.h,(a.Jb||(a.Jb=[])).push(this)};eb(P);X.prototype.clear=function(){if(!this.cb){this.cb=!0;for(var a=0;a<this.Ra.length;++a)this.Ra[a].clear();da(this,"clear")}};X.prototype.find=function(a,b){return this.I.find(a,b)};eb(X);var bg=0;F.prototype=be(yb.prototype,{constructor:F,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},
remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Vc(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:V(function(a){var b=v(this.first,0),c=this.first+this.size-1;rb(this,{from:b,to:v(c,D(this,c).text.length),text:this.splitLines(a),origin:"setValue",jc:!0},!0);this.a&&yc(this.a,0,0);W(this,ya(b),ta)}),replaceRange:function(a,b,c,d){sb(this,a,b=I(this,b),c?I(this,c):b,d)},getRange:function(a,b,c){a=Ra(this,I(this,a),I(this,
b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Db(this,a))return D(this,a)},getLineNumber:function(a){return M(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=D(this,a)),va(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return I(this,a)},getCursor:function(a){var b=this.c.I();
return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.c.b},somethingSelected:function(){return this.c.somethingSelected()},setCursor:V(function(a,b,c){a=I(this,"number"==typeof a?v(a,b||0):a);W(this,ya(a,null),c)}),setSelection:V(function(a,b,c){var d=I(this,a);a=I(this,b||a);W(this,ya(d,a),c)}),extendSelection:V(function(a,b,c){Cc(this,I(this,a),b&&I(this,b),c)}),extendSelections:V(function(a,b){nf(this,ee(this,a),b)}),
extendSelectionsBy:V(function(a,b){nf(this,ee(this,jc(this.c.b,a)),b)}),setSelections:V(function(a,b,c){if(a.length){for(var d=[],e=0;e<a.length;e++)d[e]=new x(I(this,a[e].anchor),I(this,a[e].head));null==b&&(b=Math.min(a.length-1,this.c.L));W(this,sa(d,b),c)}}),addSelection:V(function(a,b,c){var d=this.c.b.slice(0);d.push(new x(I(this,a),I(this,b||a)));W(this,sa(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.c.b,d=0;d<c.length;d++){var e=Ra(this,c[d].from(),c[d].to());b=b?b.concat(e):
e}return!1===a?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.c.b,d=0;d<c.length;d++){var e=Ra(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.c.b.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:V(function(a,b,c){for(var d=[],e=this.c,f=0;f<e.b.length;f++){var g=e.b[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(a=
b&&"end"!=b){a=[];e=c=v(this.first,0);for(f=0;f<d.length;f++){var h=d[f],g=ff(h.from,c,e),k=ff(La(h),c,e);(c=h.to,e=k,"around"==b)?(h=this.c.b[f],h=0>H(h.head,h.anchor),a[f]=new x(h?k:g,h?g:k)):a[f]=new x(g,g)}a=new n(a,this.c.L)}b=a;for(a=d.length-1;0<=a;a--)rb(this,d[a]);b?of(this,b):this.a&&lb(this.a)}),undo:V(function(){Ec(this,"undo")}),redo:V(function(){Ec(this,"redo")}),undoSelection:V(function(){Ec(this,"undo",!0)}),redoSelection:V(function(){Ec(this,"redo",!0)}),setExtending:function(a){this.extend=
a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].b||++b;for(d=0;d<a.N.length;d++)a.N[d].b||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new fc(this.history.Ib)},markClean:function(){this.Nc=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.Bb=this.history.Cb=this.history.gb=null),this.history.ea},isClean:function(a){return this.history.ea==(a||this.Nc)},getHistory:function(){return{done:pb(this.history.done),
N:pb(this.history.N)}},setHistory:function(a){var b=this.history=new fc(this.history.Ib);b.done=pb(a.done.slice(0),null,!0);b.N=pb(a.N.slice(0),null,!0)},setGutterMarker:V(function(a,b,c){return Sb(this,a,"gutter",function(a){var d=a.$||(a.$={});return!(d[b]=c)&&ce(d)&&(a.$=null),!0})}),clearGutter:V(function(a){var b=this;this.iter(function(c){c.$&&c.$[a]&&Sb(b,c,"gutter",function(){return c.$[a]=null,ce(c.$)&&(c.$=null),!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!Db(this,a)||
!(a=D(this,b=a)))return null}else if(null==(b=M(a)))return null;return{line:b,handle:a,text:a.text,$:a.$,A:a.A,D:a.D,Fc:a.Fc,B:a.B}},addLineClass:V(function(a,b,c){return Sb(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(ea(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:V(function(a,b,c){return Sb(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":
"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",f=a[d];if(!f)return!1;if(null==c)a[d]=null;else{var g=f.match(ea(c));if(!g)return!1;var h=g.index+g[0].length;a[d]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}return!0})}),addLineWidget:V(function(a,b,c){return e=a,f=new O(d=this,b,c),(g=d.a)&&f.Lb&&(g.display.Gc=!0),Sb(d,e,"widget",function(a){var b=a.B||(a.B=[]);if(null==f.re?b.push(f):b.splice(Math.min(b.length-1,Math.max(0,f.re)),0,f),f.line=a,g&&!db(d,a))b=
Ia(a)<d.scrollTop,Ga(a,a.height+md(f)),b&&Bd(g,f.height),g.h.ta=!0;return!0}),g&&da(g,"lineWidgetAdded",g,f,"number"==typeof e?e:M(e)),f;var d,e,f,g}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return tb(this,I(this,a),I(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={Ed:b&&(null==b.nodeType?b.mg:b),la:b&&b.la,Oc:!1,yc:b&&b.yc,mc:b&&b.mc};return tb(this,a=I(this,a),a,c,"bookmark")},findMarksAt:function(a){var b=[],c=D(this,(a=I(this,a)).line).s;if(c)for(var d=
0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.j.parent||e.j)}return b},findMarks:function(a,b,c){a=I(this,a);b=I(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){if(f=f.s)for(var g=0;g<f.length;g++){var h=f[g];null!=h.to&&e==a.line&&a.ch>=h.to||null==h.from&&e!=a.line||null!=h.from&&e==b.line&&h.from>=b.ch||c&&!c(h.j)||d.push(h.j.parent||h.j)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){if(b=b.s)for(var c=
0;c<b.length;++c)null!=b[c].from&&a.push(b[c].j)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){e=e.text.length+d;if(a<e)return b=a,!0;a-=e;++c}),I(this,v(c,b))},indexFromPos:function(a){var b=(a=I(this,a)).ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new F(Vc(this,this.first,this.first+this.size),this.Ta,this.first,
this.Pa,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.c=this.c,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new F(Vc(this,b,c),a.mode||this.Ta,b,this.Pa,this.direction);a.mb&&(b.history=this.history);(this.X||(this.X=[])).push({doc:b,mb:a.mb});b.X=[{doc:this,se:!0,mb:a.mb}];a=Af(this);
for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);H(f,e)&&(f=tb(b,f,e,d.I,d.I.type),d.Ra.push(f),f.parent=d)}return b},unlinkDoc:function(a){if(a instanceof y&&(a=a.doc),this.X)for(var b=0;b<this.X.length;++b)if(this.X[b].doc==a){this.X.splice(b,1);a.unlinkDoc(this);vg(Af(this));break}if(a.history==this.history){var c=[a.id];Xa(a,function(a){return c.push(a.id)},!0);a.history=new fc(null);a.history.done=pb(this.history.done,c);a.history.N=pb(this.history.N,c)}},iterLinkedDocs:function(a){Xa(this,
a)},getMode:function(){return this.mode},getEditor:function(){return this.a},splitLines:function(a){return this.Pa?a.split(this.Pa):Vd(a)},lineSeparator:function(){return this.Pa||"\n"},Fe:V(function(a){var b;("rtl"!=a&&(a="ltr"),a!=this.direction)&&(this.direction=a,this.iter(function(a){return a.order=null}),this.a&&na(b=this.a,function(){hf(b);ja(b)}))})});for(var Cf=0,Ef=!1,Ma={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",
33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},cc=0;10>cc;cc++)Ma[cc+48]=Ma[cc+
96]=String(cc);for(var Kc=65;90>=Kc;Kc++)Ma[Kc]=String.fromCharCode(Kc);for(var dc=1;12>=dc;dc++)Ma[dc+111]=Ma[dc+63235]="F"+dc;var Tb={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll",
"Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",
"Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},
macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",
"Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};Tb["default"]=pa?Tb.macDefault:Tb.pcDefault;var Ub={fg:tf,gg:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),ta)},Uf:function(a){return vb(a,function(b){if(b.empty()){var c=D(a.doc,b.head.line).text.length;return b.head.ch==c&&
b.head.line<a.lastLine()?{from:b.head,to:v(b.head.line+1,0)}:{from:b.head,to:v(b.head.line,c)}}return{from:b.from(),to:b.to()}})},kf:function(a){return vb(a,function(b){return{from:v(b.from().line,0),to:I(a.doc,v(b.to().line+1,0))}})},df:function(a){return vb(a,function(a){return{from:v(a.from().line,0),to:a.from()}})},gf:function(a){return vb(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},hf:function(a){return vb(a,function(b){var c=
a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.v.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},Af:function(a){return a.extendSelection(v(a.firstLine(),0))},zf:function(a){return a.extendSelection(v(a.lastLine()))},If:function(a){return a.extendSelectionsBy(function(b){return Jf(a,b.head.line)},{origin:"+move",
ac:1})},Jf:function(a){return a.extendSelectionsBy(function(b){return Kf(a,b.head)},{origin:"+move",ac:1})},Ef:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var c=D(a.doc,b),d;d=c;for(var e;e=cb(d,!1);)d=e.find(1,!0).line;d!=c&&(b=M(d));return Pd(!0,a,c,b,-1)},{origin:"+move",ac:-1})},Hf:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.v.offsetWidth+100,top:b},"div")},bc)},Ff:function(a){return a.extendSelectionsBy(function(b){b=
a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},bc)},Gf:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Kf(a,b.head):c},bc)},Kf:function(a){return a.moveV(-1,"line")},Df:function(a){return a.moveV(1,"line")},Mf:function(a){return a.moveV(-1,"page")},Lf:function(a){return a.moveV(1,"page")},vf:function(a){return a.moveH(-1,"char")},wf:function(a){return a.moveH(1,
"char")},xf:function(a){return a.moveH(-1,"column")},yf:function(a){return a.moveH(1,"column")},Nf:function(a){return a.moveH(-1,"word")},Cf:function(a){return a.moveH(1,"group")},Bf:function(a){return a.moveH(-1,"group")},Of:function(a){return a.moveH(1,"word")},af:function(a){return a.deleteH(-1,"char")},$e:function(a){return a.deleteH(1,"char")},ff:function(a){return a.deleteH(-1,"word")},ef:function(a){return a.deleteH(1,"word")},cf:function(a){return a.deleteH(-1,"group")},bf:function(a){return a.deleteH(1,
"group")},Pf:function(a){return a.indentSelection("smart")},Rf:function(a){return a.indentSelection("add")},Qf:function(a){return a.indentSelection("subtract")},Tf:function(a){return a.replaceSelection("\t")},Sf:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=la(a.getLine(f.line),f.ch,d);b.push(Sc(d-f%d))}a.replaceSelections(b)},Ze:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},lg:function(a){return na(a,
function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=b[d].head,f=D(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new v(e.line,e.ch-1)),0<e.ch)e=new v(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),v(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=D(a.doc,e.line-1).text;g&&(e=new v(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),v(e.line-1,g.length-1),e,"+transpose"))}c.push(new x(e,e))}a.setSelections(c)})},
ag:function(a){return na(a,function(){for(var b=a.listSelections(),c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(c=0;c<b.length;c++)a.indentLine(b[c].from().line,null,!0);lb(a)})},cg:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Ag=new Na,Qd=null,Xb,Wb;L.prototype.compare=function(a,b,c){return this.time+400>a&&0==H(b,this.i)&&c==this.button};var wb={toString:function(){return"CodeMirror.Init"}},
Rf={},Ic={};y.defaults=Rf;y.optionHandlers=Ic;var Td=[];y.defineInitHook=function(a){return Td.push(a)};var fa=null;z.prototype.init=function(a){function b(a){if(!T(e,a)){if(e.somethingSelected())fa={Gb:!1,text:e.getSelections()},"cut"==a.type&&e.replaceSelection("",null,"cut");else{if(!e.options.lineWiseCopyCut)return;var b=Uf(e);fa={Gb:!0,text:b.text};"cut"==a.type&&e.operation(function(){e.setSelections(b.b,0,ta);e.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();
var c=fa.text.join("\n");if(a.clipboardData.setData("Text",c),a.clipboardData.getData("Text")==c)return void a.preventDefault()}var g=Wf();a=g.firstChild;e.display.G.insertBefore(g,e.display.G.firstChild);a.value=fa.text.join("\n");var p=document.activeElement;Ab(a);setTimeout(function(){e.display.G.removeChild(g);p.focus();p==f&&d.Jd()},50)}}var c=this,d=this,e=d.a,f=d.sa=a.v;Vf(f,e.options.spellcheck);A(f,"paste",function(a){T(e,a)||Tf(a,e)||11>=N&&setTimeout(U(e,function(){return c.Cc()}),20)});
A(f,"compositionstart",function(a){c.u={data:a.data,done:!1}});A(f,"compositionupdate",function(a){c.u||(c.u={data:a.data,done:!1})});A(f,"compositionend",function(a){c.u&&(a.data!=c.u.data&&c.zd(),c.u.done=!0)});A(f,"touchstart",function(){return d.ic()});A(f,"input",function(){c.u||c.zd()});A(f,"copy",b);A(f,"cut",b)};z.prototype.Mb=function(){var a=Ne(this.a,!1);return a.focus=this.a.state.focused,a};z.prototype.Qb=function(a,b){a&&this.a.display.view.length&&((a.focus||b)&&this.Jd(),this.Ge(a))};
z.prototype.getSelection=function(){return this.a.display.g.ownerDocument.getSelection()};z.prototype.Jd=function(){var a=this.getSelection(),b=this.a,c=b.doc.c.I(),d=c.from(),c=c.to();if(b.display.l==b.display.o||d.line>=b.display.l||c.line<b.display.o)a.removeAllRanges();else{var e=Jc(b,a.anchorNode,a.anchorOffset),f=Jc(b,a.focusNode,a.focusOffset);if(!e||e.sb||!f||f.sb||0!=H(mc(e,f),d)||0!=H(lc(e,f),c))if(e=b.display.view,d=d.line>=b.display.o&&Yf(b,d)||{node:e[0].measure.map[2],offset:0},c=c.line<
b.display.l&&Yf(b,c),c||(c=e[e.length-1].measure,c=c.xa?c.xa[c.xa.length-1]:c.map,c={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}),d&&c){var g,e=a.rangeCount&&a.getRangeAt(0);try{g=ib(d.node,d.offset,c.offset,c.node)}catch(h){}g&&(!Fa&&b.state.focused?(a.collapse(d.node,d.offset),g.collapsed||(a.removeAllRanges(),a.addRange(g))):(a.removeAllRanges(),a.addRange(g)),e&&null==a.anchorNode?a.addRange(e):Fa&&this.Ie());this.Cd()}else a.removeAllRanges()}};z.prototype.Ie=function(){var a=this;
clearTimeout(this.yb);this.yb=setTimeout(function(){a.yb=!1;a.ja()&&a.a.operation(function(){return a.a.h.ja=!0})},20)};z.prototype.Ge=function(a){ha(this.a.display.Z,a.Tc);ha(this.a.display.Ob,a.selection)};z.prototype.Cd=function(){var a=this.getSelection();this.gd=a.anchorNode;this.hd=a.anchorOffset;this.jd=a.focusNode;this.kd=a.focusOffset};z.prototype.Id=function(){var a=this.getSelection();return a.rangeCount?Ea(this.sa,a.getRangeAt(0).commonAncestorContainer):!1};z.prototype.focus=function(){"nocursor"!=
this.a.options.readOnly&&(this.Id()||this.Qb(this.Mb(),!0),this.sa.focus())};z.prototype.blur=function(){this.sa.blur()};z.prototype.eb=function(){return this.sa};z.prototype.Md=function(){return!0};z.prototype.Bd=function(){var a=this;this.Id()?this.xd():na(this.a,function(){return a.a.h.ja=!0});this.Wa.set(this.a.options.pollInterval,function c(){a.a.state.focused&&(a.xd(),a.Wa.set(a.a.options.pollInterval,c))})};z.prototype.ja=function(){var a=this.getSelection();return a.anchorNode!=this.gd||
a.anchorOffset!=this.hd||a.focusNode!=this.jd||a.focusOffset!=this.kd};z.prototype.xd=function(){if(null==this.na&&!this.yb&&this.ja()){var a=this.getSelection(),b=this.a;if(uc&&tc&&this.a.options.gutters.length&&function(a){for(;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}(a.anchorNode))this.a.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.u){this.Cd();var c=Jc(b,a.anchorNode,a.anchorOffset),d=Jc(b,
a.focusNode,a.focusOffset);c&&d&&na(b,function(){W(b.doc,ya(c,d),ta);(c.sb||d.sb)&&(b.h.ja=!0)})}}};z.prototype.Be=function(){null!=this.na&&(clearTimeout(this.na),this.na=null);var a,b,c,d=this.a,e=d.display;c=d.doc.c.I();var f=c.from(),g=c.to();if(0==f.ch&&f.line>d.firstLine()&&(f=v(f.line-1,D(d.doc,f.line-1).length)),g.ch==D(d.doc,g.line).text.length&&g.line<d.lastLine()&&(g=v(g.line+1,0)),f.line<e.o||g.line>e.l-1)return!1;c=f.line==e.o||0==(a=Sa(d,f.line))?(b=M(e.view[0].line),e.view[0].node):
(b=M(e.view[a].line),e.view[a-1].node.nextSibling);var h;a=Sa(d,g.line);if(e=a==e.view.length-1?(h=e.l-1,e.v.lastChild):(h=M(e.view[a+1].line)-1,e.view[a+1].node.previousSibling),!c)return!1;c=d.doc.splitLines(function(a,b,c,d,e){function f(){l&&(k+=p,m&&(k+=p),l=m=!1)}function g(a){a&&(f(),k+=a)}function h(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(c){g(c);return}var k;if(c=b.getAttribute("cm-marker")){b=a.findMarks(v(d,0),v(e+1,0),(t=+c,function(a){return a.id==t}));b.length&&(k=b[0].find(0))&&
g(Ra(a.doc,k.from,k.to).join(p));return}if("false"==b.getAttribute("contenteditable"))return;k=/^(pre|div|p|li|table|br)$/i.test(b.nodeName);if(!/^br$/i.test(b.nodeName)&&0==b.textContent.length)return;k&&f();for(c=0;c<b.childNodes.length;c++)h(b.childNodes[c]);/^(pre|p)$/i.test(b.nodeName)&&(m=!0);k&&(l=!0)}else 3==b.nodeType&&g(b.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var t}for(var k="",l=!1,p=a.doc.lineSeparator(),m=!1;h(b),b!=c;)b=b.nextSibling,m=!1;return k}(d,c,e,b,h));for(e=
Ra(d.doc,v(b,0),v(h,D(d.doc,h).text.length));1<c.length&&1<e.length;)if(K(c)==K(e))c.pop(),e.pop(),h--;else{if(c[0]!=e[0])break;c.shift();e.shift();b++}a=g=0;for(var k=c[0],l=e[0],p=Math.min(k.length,l.length);g<p&&k.charCodeAt(g)==l.charCodeAt(g);)++g;k=K(c);l=K(e);for(p=Math.min(k.length-(1==c.length?g:0),l.length-(1==e.length?g:0));a<p&&k.charCodeAt(k.length-a-1)==l.charCodeAt(l.length-a-1);)++a;if(1==c.length&&1==e.length&&b==f.line)for(;g&&g>f.ch&&k.charCodeAt(k.length-a-1)==l.charCodeAt(l.length-
a-1);)g--,a++;c[c.length-1]=k.slice(0,k.length-a).replace(/^\u200b+/,"");c[0]=c[0].slice(g).replace(/\u200b+$/,"");b=v(b,g);h=v(h,e.length?K(e).length-a:0);return 1<c.length||c[0]||H(b,h)?(sb(d.doc,c,b,h,"+input"),!0):void 0};z.prototype.wb=function(){this.ic()};z.prototype.reset=function(){this.ic()};z.prototype.ic=function(){this.u&&(clearTimeout(this.na),this.u=null,this.Cc(),this.sa.blur(),this.sa.focus())};z.prototype.zd=function(){var a=this;null==this.na&&(this.na=setTimeout(function(){if(a.na=
null,a.u){if(!a.u.done)return;a.u=null}a.Cc()},80))};z.prototype.Cc=function(){var a=this;!this.a.isReadOnly()&&this.Be()||na(this.a,function(){return ja(a.a)})};z.prototype.Ca=function(a){a.contentEditable="false"};z.prototype.vd=function(a){0==a.charCode||this.u||(a.preventDefault(),this.a.isReadOnly()||U(this.a,Ud)(this.a,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};z.prototype.Ad=function(a){this.sa.contentEditable=String("nocursor"!=a)};z.prototype.ud=function(){};z.prototype.Hd=
function(){};z.prototype.sd=!0;var Xd,Za;w.prototype.init=function(a){function b(a){if(!T(e,a)){if(e.somethingSelected())fa={Gb:!1,text:e.getSelections()};else{if(!e.options.lineWiseCopyCut)return;var b=Uf(e);fa={Gb:!0,text:b.text};"cut"==a.type?e.setSelections(b.b,null,ta):(d.ia="",f.value=b.text.join("\n"),Ab(f))}"cut"==a.type&&(e.state.cutIncoming=!0)}}var c=this,d=this,e=this.a;this.ge();var f=this.textarea;a.g.insertBefore(this.g,a.g.firstChild);$b&&(f.style.width="0px");A(f,"input",function(){J&&
9<=N&&c.Oa&&(c.Oa=null);d.kb()});A(f,"paste",function(a){T(e,a)||Tf(a,e)||(e.state.pasteIncoming=!0,d.bd())});A(f,"cut",b);A(f,"copy",b);A(a.f,"paste",function(b){Ca(a,b)||T(e,b)||(e.state.pasteIncoming=!0,d.focus())});A(a.G,"selectstart",function(b){Ca(a,b)||ca(b)});A(f,"compositionstart",function(){var a=e.getCursor("from");d.u&&d.u.Nb.clear();d.u={start:a,Nb:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}});A(f,"compositionend",function(){d.u&&(d.kb(),d.u.Nb.clear(),d.u=null)})};
w.prototype.ge=function(){this.g=Wf();this.textarea=this.g.firstChild};w.prototype.Mb=function(){var a=this.a,b=a.display,c=a.doc,d=Ne(a);if(a.options.moveInputWithCursor){var a=wa(a,c.c.I().head,"div"),c=b.g.getBoundingClientRect(),e=b.v.getBoundingClientRect();d.Nd=Math.max(0,Math.min(b.g.clientHeight-10,a.top+e.top-c.top));d.Le=Math.max(0,Math.min(b.g.clientWidth-10,a.left+e.left-c.left))}return d};w.prototype.Qb=function(a){var b=this.a.display;ha(b.Z,a.Tc);ha(b.Ob,a.selection);null!=a.Nd&&(this.g.style.top=
a.Nd+"px",this.g.style.left=a.Le+"px")};w.prototype.reset=function(a){if(!this.dc&&!this.u){var b=this.a;b.somethingSelected()?(this.ia="",a=b.getSelection(),this.textarea.value=a,b.state.focused&&Ab(this.textarea),J&&9<=N&&(this.Oa=a)):a||(this.ia=this.textarea.value="",J&&9<=N&&(this.Oa=null))}};w.prototype.eb=function(){return this.textarea};w.prototype.Md=function(){return!1};w.prototype.focus=function(){if("nocursor"!=this.a.options.readOnly&&(!Cb||za()!=this.textarea))try{this.textarea.focus()}catch(a){}};
w.prototype.blur=function(){this.textarea.blur()};w.prototype.Hd=function(){this.g.style.top=this.g.style.left=0};w.prototype.Bd=function(){this.Ac()};w.prototype.Ac=function(){var a=this;this.lb||this.Wa.set(this.a.options.pollInterval,function(){a.kb();a.a.state.focused&&a.Ac()})};w.prototype.bd=function(){var a=!1,b=this;b.lb=!0;b.Wa.set(20,function d(){b.kb()||a?(b.lb=!1,b.Ac()):(a=!0,b.Wa.set(60,d))})};w.prototype.kb=function(){var a=this,b=this.a,c=this.textarea,d=this.ia;if(this.dc||!b.state.focused||
Ng(c)&&!d&&!this.u||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(J&&9<=N&&this.Oa===e||pa&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.c==b.display.Ba){var f=e.charCodeAt(0);if(8203!=f||d||(d="\u200b"),8666==f)return this.reset(),this.a.execCommand("undo")}for(var g=0,f=Math.min(d.length,e.length);g<f&&d.charCodeAt(g)==e.charCodeAt(g);)++g;return na(b,function(){Ud(b,e.slice(g),d.length-g,null,a.u?
"*compose":null);1E3<e.length||-1<e.indexOf("\n")?c.value=a.ia="":a.ia=e;a.u&&(a.u.Nb.clear(),a.u.Nb=b.markText(a.u.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0};w.prototype.wb=function(){this.lb&&this.kb()&&(this.lb=!1)};w.prototype.vd=function(){J&&9<=N&&(this.Oa=null);this.bd()};w.prototype.ud=function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.ia=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=
b.length;f.Ba=e.doc.c}}function c(){if(d.dc=!1,d.g.style.cssText=p,g.style.cssText=l,J&&9>N&&f.scrollbars.Pb(f.f.scrollTop=k),null!=g.selectionStart){(!J||J&&9>N)&&b();var a=0,c=function(){f.Ba==e.doc.c&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.ia?U(e,tf)(e):10>a++?f.Wc=setTimeout(c,500):(f.Ba=null,f.input.reset())};f.Wc=setTimeout(c,200)}}var d=this,e=d.a,f=e.display,g=d.textarea,h=Va(e,a),k=f.f.scrollTop;if(h&&!ra){e.options.resetSelectionOnContextMenu&&-1==e.doc.c.contains(h)&&U(e,W)(e.doc,
ya(h),ta);var l=g.style.cssText,p=d.g.style.cssText;d.g.style.cssText="position: absolute";var m,h=d.g.getBoundingClientRect();if(g.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-h.top-5)+"px; left: "+(a.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(J?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",aa&&(m=window.scrollY),f.input.focus(),
aa&&window.scrollTo(null,m),f.input.reset(),e.somethingSelected()||(g.value=d.ia=" "),d.dc=!0,f.Ba=e.doc.c,clearTimeout(f.Wc),J&&9<=N&&b(),Sd){Hb(a);var r=function(){ia(window,"mouseup",r);setTimeout(c,20)};A(window,"mouseup",r)}else setTimeout(c,50)}};w.prototype.Ad=function(a){a||this.reset();this.textarea.disabled="nocursor"==a};w.prototype.Ca=function(){};w.prototype.sd=!1;(function(a){function b(b,e,f,g){a.defaults[b]=e;f&&(c[b]=g?function(a,b,c){c!=wb&&f(a,b,c)}:f)}var c=a.optionHandlers;a.defineOption=
b;a.Init=wb;b("value","",function(a,b){return a.setValue(b)},!0);b("mode",null,function(a,b){a.doc.Ta=b;Hd(a)},!0);b("indentUnit",2,Hd,!0);b("indentWithTabs",!1);b("smartIndent",!0);b("tabSize",4,function(a){Qb(a);sc(a);ja(a)},!0);b("lineSeparator",null,function(a,b){if(a.doc.Pa=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length;c.push(v(d,f))}d++});for(var e=c.length-1;0<=e;e--)sb(a.doc,b,c[e],v(c[e].line,c[e].ch+b.length))}});b("specialChars",
/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=wb&&a.refresh()});b("specialCharPlaceholder",lg,function(a){return a.refresh()},!0);b("electricChars",!0);b("inputStyle",Cb?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0);b("rtlMoveVisually",!Mg);
b("wholeLineUpdateBefore",!0);b("theme","default",function(a){Qf(a);Yb(a)},!0);b("keyMap","default",function(a,b,c){b=Md(b);(c=c!=wb&&Md(c))&&c.detach&&c.detach(a,b);b.$d&&b.$d(a,c||null)});b("extraKeys",null);b("configureMouse",null);b("lineWrapping",!1,Hg,!0);b("gutters",[],function(a){Fd(a.options);Yb(a)},!0);b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?vd(a.display)+"px":"0";a.refresh()},!0);b("coverGutterNextToScrollbar",!1,function(a){return mb(a)},!0);b("scrollbarStyle",
"native",function(a){Ye(a);mb(a);a.display.scrollbars.Pb(a.doc.scrollTop);a.display.scrollbars.xc(a.doc.scrollLeft)},!0);b("lineNumbers",!1,function(a){Fd(a.options);Yb(a)},!0);b("firstLineNumber",1,Yb,!0);b("lineNumberFormatter",function(a){return a},Yb,!0);b("showCursorWhenSelecting",!1,Lb,!0);b("resetSelectionOnContextMenu",!0);b("lineWiseCopyCut",!0);b("pasteLinesPerSelection",!0);b("readOnly",!1,function(a,b){"nocursor"==b&&(Mb(a),a.display.input.blur());a.display.input.Ad(b)});b("disableInput",
!1,function(a,b){b||a.display.input.reset()},!0);b("dragDrop",!0,Gg);b("allowDropFileTypes",null);b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,Lb,!0);b("singleCursorHeightPerLine",!0,Lb,!0);b("workTime",100);b("workDelay",100);b("flattenSpans",!0,Qb,!0);b("addModeClass",!1,Qb,!0);b("pollInterval",100);b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b});b("historyEventDelay",1250);b("viewportMargin",10,function(a){return a.refresh()},!0);b("maxHighlightLength",
1E4,Qb,!0);b("moveInputWithCursor",!0,function(a,b){b||a.display.input.Hd()});b("tabindex",null,function(a,b){return a.display.input.eb().tabIndex=b||""});b("autofocus",null);b("direction","ltr",function(a,b){return a.doc.Fe(b)},!0);b("phrases",null)})(y);Xd=y.optionHandlers;Za=y.helpers={};y.prototype={constructor:y,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];c[a]==b&&"mode"!=a||(c[a]=b,Xd.hasOwnProperty(a)&&U(this,Xd[a])(this,b,d),
Q(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},indentLine:xa(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Db(this.doc,a)&&Zb(this,a,b,c)}),indentSelection:xa(function(a){for(var b=this.doc.c.b,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Zb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.c.L&&lb(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),
e.line-(e.ch?0:1))+1,e=g;e<c;++e)Zb(this,e,a);e=this.doc.c.b;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&Kd(this.doc,d,new x(f,e[d].to()),ta)}}}),getTokenAt:function(a,b){for(var c=a,d,e=this.doc,f=e.mode,g=D(e,(c=I(e,c)).line),e=Ib(this,c.line,b),g=new Y(g.text,this.options.tabSize,e);g.i<c.ch&&!g.eol();)g.start=g.i,d=jd(f,g,e.state);return new C(g,d,e.state)},getTokenTypeAt:function(a){a=I(this.doc,a);var b;b=pe(this,D(this.doc,a.line));var c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=
c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else{if(!(b[2*e+1]<a)){b=b[2*e+2];break}c=e+1}}c=b?b.indexOf("overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?y.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Za.hasOwnProperty(b))return c;var d=Za[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=
d[e[b][f]];g&&c.push(g)}else e.fb&&d[e.fb]?c.push(d[e.fb]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d.Vb.length;f++)g=d.Vb[f],g.Ce(e,this)&&-1==Z(c,g.Qd)&&c.push(g.Qd);return c},getStateAfter:function(a,b){var c=this.doc;return Ib(this,Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1))+1,b).state},cursorCoords:function(a,b){var c=this.doc.c.I();return wa(this,null==a?c.head:"object"==typeof a?I(this.doc,a):a?c.from():c.to(),b||"page")},charCoords:function(a,b){return rd(this,I(this.doc,
a),b||"page")},coordsChar:function(a,b){var c;var d=b||"page";if("div"==d)c=a;else{c=a.left;var e=a.top;"page"==d?(c-=He(),e-=Ie()):"local"!=d&&d||(d=this.display.w.getBoundingClientRect(),c+=d.left,e+=d.top);d=this.display.G.getBoundingClientRect();c={left:c-d.left,top:e-d.top}}return td(this,(a=c).left,a.top)},addWidget:function(a,b,c,d,e){var f,g,h=this.display,k=(a=wa(this,I(this.doc,a))).bottom,l=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.Ca(b),
h.w.appendChild(b),"over"==d)k=a.top;else if("above"==d||"near"==d){var p=Math.max(h.g.clientHeight,this.doc.height),m=Math.max(h.w.clientWidth,h.G.clientWidth);("above"==d||a.bottom+b.offsetHeight>p)&&a.top>b.offsetHeight?k=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=p&&(k=a.bottom);l+b.offsetWidth>m&&(l=m-b.offsetWidth)}b.style.top=k+"px";b.style.left=b.style.right="";"right"==e?(l=h.w.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?l=0:"middle"==e&&(l=(h.w.clientWidth-b.offsetWidth)/
2),b.style.left=l+"px");c&&(f={left:l,top:k,right:l+b.offsetWidth,bottom:k+b.offsetHeight},null!=(g=Ad(this,f)).scrollTop&&Nb(this,g.scrollTop),null!=g.scrollLeft&&Wa(this,g.scrollLeft))},triggerOnKeyDown:xa(Nf),execCommand:function(a){if(Ub.hasOwnProperty(a))return Ub[a].call(null,this)},moveH:xa(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Xf(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},bc)}),deleteH:xa(function(a,
b){var c=this.doc;this.doc.c.somethingSelected()?c.replaceSelection("",null,"+delete"):vb(this,function(d){var e=Xf(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),moveV:xa(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.c.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=wa(c,g.head,"div");null!=g.dd&&(h.left=g.dd);e.push(h.left);var l,p,m;l=c.doc;var r=h.left;"page"==b?(p=Math.max(Math.min(c.display.g.clientHeight,
window.innerHeight||document.documentElement.clientHeight)-.5*kb(c.display),3),p=(0<a?h.bottom:h.top)+a*p):"line"==b&&(p=0<a?h.bottom+3:h.top-3);for(;(m=td(c,r,p)).ye;){if(0>a?0>=p:p>=l.height){m.qe=!0;break}p+=5*a}l=m;return"page"==b&&g==d.c.I()&&Bd(c,rd(c,l,"div").top-h.top),l},bc),e.length)for(var g=0;g<d.c.b.length;g++)d.c.b[g].dd=e[g]}),findWordAt:function(a){var b=D(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");"before"!=a.H&&d!=b.length||!c?++d:--c;for(var f=
b.charAt(c),f=kc(f,e)?function(a){return kc(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!kc(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new x(v(a.line,c),v(a.line,d))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Pa(this.display.Z,"CodeMirror-overwrite"):Oa(this.display.Z,"CodeMirror-overwrite"),Q(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.eb()==
za()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.tb)},scrollTo:xa(function(a,b){yc(this,a,b)}),scrollIntoView:xa(function(a,b){var c;null==a?(a={from:this.doc.c.I().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:v(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?(c=a,xc(this),this.h.R=c):Ve(this,a.from,a.to,a.margin)}),setSize:xa(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?
a+"px":a}var d=this;null!=a&&(this.display.g.style.width=c(a));null!=b&&(this.display.g.style.height=c(b));this.options.lineWrapping&&Ge(this);var e=this.display.o;this.doc.iter(e,this.display.l,function(a){if(a.B)for(var b=0;b<a.B.length;b++)if(a.B[b].Lb){Ka(d,e,"widget");break}++e});this.h.ta=!0;Q(this,"refresh",this)}),operation:function(a){return na(this,a)},refresh:xa(function(){var a=this.display.Ga;ja(this);this.h.ta=!0;sc(this);yc(this,this.doc.scrollLeft,this.doc.scrollTop);zd(this);(null==
a||.5<Math.abs(a-kb(this.display)))&&wd(this);Q(this,"refresh",this)}),getInputField:function(){return this.display.input.eb()},getWrapperElement:function(){return this.display.g},getScrollerElement:function(){return this.display.f},getGutterElement:function(){return this.display.gutters}};eb(y);y.registerHelper=function(a,b,c){Za.hasOwnProperty(a)||(Za[a]=y[a]={Vb:[]});Za[a][b]=c};y.registerGlobalHelper=function(a,b,c,d){y.registerHelper(a,b,d);Za[a].Vb.push({Ce:c,Qd:d})};var Og="iter insert remove copy getEditor constructor".split(" "),
ec;for(ec in F.prototype)F.prototype.hasOwnProperty(ec)&&0>Z(Og,ec)&&(y.prototype[ec]=function(a){return function(){return a.apply(this.doc,arguments)}}(F.prototype[ec]));return eb(F),y.inputStyles={textarea:w,contenteditable:z},y.defineMode=function(a){y.defaults.mode||"null"==a||(y.defaults.mode=a);(function(a,c){2<arguments.length&&(c.lf=Array.prototype.slice.call(arguments,2));gd[a]=c}).apply(this,arguments)},y.defineMIME=function(a,b){fb[a]=b},y.defineMode("null",function(){return{T:function(a){return a.skipToEnd()}}}),
y.defineMIME("text/plain","null"),y.defineExtension=function(a,b){y.prototype[a]=b},y.defineDocExtension=function(a,b){F.prototype[a]=b},y.fromTextArea=function(a,b){function c(){a.value=h.getValue()}if((b=b?Qa(b):{}).value=a.value,!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex),!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder),null==b.autofocus){var d=za();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}var e;if(a.form&&(A(a.form,"submit",c),!b.Vf)){var f=a.form;
e=f.submit;try{var g=f.submit=function(){c();f.submit=e;f.submit();f.submit=g}}catch(k){}}b.cd=function(b){b.save=c;b.uf=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(ia(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=e))}};a.style.display="none";var h=y(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return h},y.off=ia,y.on=A,y.wheelEventPixels=function(a){a=cf(a);
return a.x*=ka,a.y*=ka,a},y.Doc=F,y.splitLines=Vd,y.countColumn=la,y.findColumn=Rc,y.isWordChar=Tc,y.Pass=Gc,y.signal=Q,y.Line=m,y.changeEnd=La,y.scrollbarModel=Ze,y.Pos=v,y.cmpPos=H,y.modes=gd,y.mimeModes=fb,y.resolveMode=pc,y.getMode=fd,y.modeExtensions=gb,y.extendMode=function(a,b){Qa(b,gb.hasOwnProperty(a)?gb[a]:gb[a]={})},y.copyState=hb,y.startState=me,y.innerMode=hd,y.commands=Ub,y.keyMap=Tb,y.keyName=If,y.isModifierKey=Ff,y.lookupKey=ub,y.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=
a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=jc(c.split(" "),zg),f=0;f<e.length;f++){var g,h=void 0;g=f==e.length-1?(h=e.join(" "),d):(h=e.slice(0,f+1).join(" "),"...");var k=b[h];if(k){if(k!=g)throw Error("Inconsistent bindings for "+h);}else b[h]=g}delete a[c]}}for(var l in b)a[l]=b[l];return a},y.StringStream=Y,y.SharedTextMarker=X,y.TextMarker=P,y.LineWidget=O,y.e_preventDefault=ca,y.e_stopPropagation=ke,y.e_stop=Hb,y.addClass=Pa,y.contains=Ea,y.rmClass=Oa,y.keyNames=
Ma,y.version="5.40.0",y}"object"==typeof exports&&"undefined"!=typeof module?module.qf=Lc():"function"==typeof define&&define.Zd?define(Lc):this.CodeMirror=Lc();!0;
function Yd(w){function z(u,n,x){function m(){var q;w.off(x,"mouseout",m);C&&((q=C).parentNode&&(null==q.style.opacity&&q.parentNode&&q.parentNode.removeChild(q),q.style.opacity=0,setTimeout(function(){q.parentNode&&q.parentNode.removeChild(q)},600)),C=null)}var C=function(m,q){function u(m){if(!n.parentNode)return w.off(document,"mousemove",u);n.style.top=Math.max(0,m.clientY-n.offsetHeight-5)+"px";n.style.left=m.clientX+5+"px"}var n=document.createElement("div");return n.className="CodeMirror-lint-tooltip",
n.appendChild(q.cloneNode(!0)),document.body.appendChild(n),w.on(document,"mousemove",u),u(m),null!=n.style.opacity&&(n.style.opacity=1),n}(u,n),q=setInterval(function(){if(C)for(var u=x;;u=u.parentNode){if(u&&11==u.nodeType&&(u=u.host),u==document.body)return;if(!u){m();break}}if(!C)return clearInterval(q)},400);w.on(x,"mouseout",m)}function L(u,n,x){this.Hb=[];this.options=n;this.timeout=null;this.zb=x;this.wd=function(m){var n=m.target||m.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className)){for(var n=
n.getBoundingClientRect(),q=u.findMarksAt(u.coordsChar({left:(n.left+n.right)/2,top:(n.top+n.bottom)/2},"client")),n=[],E=0;E<q.length;++E){var x=q[E].Td;x&&n.push(x)}if(n.length){q=m.target||m.srcElement;E=document.createDocumentFragment();for(x=0;x<n.length;x++)E.appendChild(P(n[x]));z(m,E,q)}}!0};this.Rd=0}function F(n){var u=n.state.lint;u.zb&&n.clearGutter("CodeMirror-lint-markers");for(n=0;n<u.Hb.length;++n)u.Hb[n].clear();u.Hb.length=0}function X(n,E,x,m){var u=document.createElement("div"),
q=u;return u.className="CodeMirror-lint-marker-"+E,x&&((q=u.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker-multiple"),0!=m&&w.on(q,"mouseover",function(m){z(m,n,q)}),u}function P(n){var u=n.severity;u||(u="error");var x=document.createElement("div");return x.className="CodeMirror-lint-message-"+u,void 0!==n.ve?x.innerHTML=n.ve:x.appendChild(document.createTextNode(n.message)),x}function O(n){var u=n.state.lint.options,F=u.options||u,m=u.pe||n.getHelper(w.Pos(0,0),"lint");
if(m)if(u.async||m.async)!function(m,n,u){function q(){E=-1;m.off("change",q)}var C=m.state.lint,E=++C.Rd;m.on("change",q);n(m.getValue(),function(n,u){m.off("change",q);C.Rd==E&&(u&&n instanceof w&&(n=u),m.operation(function(){x(m,n)}))},u,m)}(n,m,F);else{var C=m(n.getValue(),F,n);C&&(C.then?C.then(function(m){n.operation(function(){x(n,m)})}):n.operation(function(){x(n,C)}))}}function x(n,x){F(n);var u,m,C=n.state.lint,q=C.options,E=[];for(m=0;m<x.length;++m){var w=x[m],A=w.from.line;(E[A]||(E[A]=
[])).push(w)}for(w=0;w<E.length;++w)if(A=E[w]){for(var z=null,L=C.zb&&document.createDocumentFragment(),O=0;O<A.length;++O){var ea=A[O],ga=ea.severity;ga||(ga="error");m=ga;z="error"==(u=z)?u:m;q.ne&&(ea=q.ne(ea));C.zb&&L.appendChild(P(ea));ea.to&&C.Hb.push(n.markText(ea.from,ea.to,{className:"CodeMirror-lint-mark-"+ga,Td:ea}))}C.zb&&n.setGutterMarker(w,"CodeMirror-lint-markers",X(L,z,1<A.length,C.options.Od))}q.xe&&q.xe(x,E,n)}function n(n){var u=n.state.lint;u&&(clearTimeout(u.timeout),u.timeout=
setTimeout(function(){O(n)},u.options.jf||500))}w.defineOption("lint",!1,function(u,x,z){if(z&&z!=w.Init&&(F(u),!1!==u.state.lint.options.lintOnChange&&u.off("change",n),w.off(u.getWrapperElement(),"mouseover",u.state.lint.wd),clearTimeout(u.state.lint.timeout),delete u.state.lint),x){z=u.getOption("gutters");for(var m=!1,C=0;C<z.length;++C)"CodeMirror-lint-markers"==z[C]&&(m=!0);x=u.state.lint=new L(u,(q=x)instanceof Function?{pe:q}:(q&&!0!==q||(q={}),q),m);!1!==x.options.lintOnChange&&u.on("change",
n);0!=x.options.Od&&"gutter"!=x.options.Od&&w.on(u.getWrapperElement(),"mouseover",x.wd);O(u)}var q});w.defineExtension("performLint",function(){this.state.lint&&O(this)})}"object"==typeof exports&&"object"==typeof module?Yd(require("../../lib/codemirror")):"function"==typeof define&&define.Zd?define(["../../lib/codemirror"],Yd):Yd(CodeMirror);
(function(w){w.defineMode("funnelql-core",function(z,L){function F(m){var n={};m=m.split(" ");for(var q=0;q<m.length;++q)n[m[q]]=!0;return n}function X(m,C){var q=m.peek(),w=47<q.charCodeAt(0)&&58>q.charCodeAt(0);if(w&&m.match(/^\d*(\.[0-9]+)?(y|M|w|d|h|m|s)/))return"timenumber";if(w&&m.match(/^[0-9]{4}-\d{2}-\d{2}T\d{2}:\d{2}/))return"date";if(w)return m.match(/^[0-9]*(\.[0-9]+)?([eE][-+]?[0-9]+)?/),"number";if("'"==q||'"'==q)return C.Da=(z=q,function(m,n){for(var q,u=!1;null!=(q=m.next());){if(q==
z&&!u){n.Da=X;break}u=E&&!u&&"\\"==q}return"string"}),m.next(),C.Da(m,C);if("#"==q)return m.skipToEnd(),m.next(),"comment";if("."==q)return m.next(),null;if(u.test(q))return m.eatWhile(u),"operator";if(/^[\(\)]/.test(q))return m.eatWhile(/^[\(\)]/),"bracket";if(ua.test(q))return m.eatWhile(ua),"punctuation";m.eatWhile(/^[_\w\d]/);var z,q=m.current().toLowerCase();return"regex"!==q?"location"===q?"location":O.hasOwnProperty(q)?"atom":x.hasOwnProperty(q)?"builtin":n.hasOwnProperty(q)?"keyword":"error":
m.match(/^\s*\(\s*(\/([^\/]|\\\/)*\/[a-z]*)\s*\)/,!1)?(m.eatWhile(/^[\s\(]/),"regex"):null}function P(m,n,q){n.context={ma:n.context,va:m.indentation(),W:m.column(),type:q}}var O=F("false true null unknown"),x={},n=F("regex fn path count url since page"),u=/^[*+\-%<>!=&|^]/,E=(L.jg,!1!==L.Ue),ua=L.eg||/^[;.,:]/;return{startState:function(){return{Da:X,context:null}},T:function(m,n){if(m.sol()&&n.context&&null==n.context.align&&(n.context.align=!1),n.Da==X&&m.eatSpace())return null;var q=n.Da(m,n);
if("comment"==q)return q;n.context&&null==n.context.align&&(n.context.align=!0);var u=m.current();return"("==u?P(m,n,")"):"["==u?P(m,n,"]"):n.context&&n.context.type==u&&(n.va=n.context.va,n.context=n.context.ma),q},va:function(m,n){var q=m.context;if(!q)return w.Pass;var u=n.charAt(0)==q.type;return q.align?q.W+(u?0:1):q.va+(u?0:z.indentUnit)},Wf:"#",We:"()[]{}''\"\"``"}});w.defineMode("funnelql",function(z){function L(x,n){var u=P.T(x,n.Ka);return"regex"==u&&(n.T=F,n.wa=O.startState(P.va(n.Ka,"")),
n.mode="regex"),u}function F(x,n){return x.match(/^\/[a-z]*\s*\)/i,!1)&&(X=!0),X&&x.match(/^\)/i,!1)?(X=!1,n.T=L,n.wa=null,n.mode="funnelql-core",L(x,n)):O.T(x,n.wa)}var X,P=w.getMode(z,{name:"funnelql-core",tf:!0}),O=w.getMode(z,"regex");return{startState:function(){var x=P.startState();return x.modes=[],x.kg=[],x.ig=[],{T:L,wa:null,mode:"funnelql",Ka:x}},copyState:function(x){if(x.wa)var n=w.copyState(x.T==F?O:P,x.wa);return{T:x.T,wa:n,mode:x.mode,Ka:w.copyState(P,x.Ka)}},T:function(x,n){return n.T(x,
n)},ee:function(x,n){return x.mode==n.mode&&(x.wa?w.Pass:P.ee(x.Ka,n.Ka))},electricChars:"/{}:"}},"funnelql-core","regex");w.defineMode("regex",function(){function w(){}return w.prototype.Da=function(w){var F;return this.state||(this.state=this.Xd),"\\"===(F=w.next())?(w.next(),"quote-regex"):this.state(w,F)},w.prototype.Xa=function(w,F){switch(F){case "/":return this.state=this.Wd,"qualifier-regex";case "[":return this.Ja=!0,this.Lc=0,this.state=this.Ud,"meta-regex";case "(":return this.Ja=!0,this.state=
this.Wb,"bracket-regex";case ")":return"bracket-regex";case "{":return w.skipTo("}")&&w.next(),"tag-regex";case ".":case "*":case "?":case "|":return"operator-regex";case "^":case "$":return"atom-regex"}},w.prototype.Xd=function(w,F){return this.state=this.Xa,"/"===F?"qualifier-regex":this.Xa(w,F)},w.prototype.Ud=function(w,F){var z;switch(z=this.Ja,this.Ja=!1,F){case "[":return this.Lc++,this.Ja=!0,"meta-regex";case "]":return 0==this.Lc--&&(this.state=this.Xa),"meta-regex";case "-":return"qualifier-regex";
default:return z&&"^"===F?"operator-regex":"string-regex"}},w.prototype.Wb=function(w,z){var F;return F=this.Ja,this.Ja=!1,this.state=this.Xa,F&&"?"===z?(this.state=this.Vd,"tag-regex"):this.Xa()},w.prototype.Vd=function(w,z){return this.state=this.Wb,"<"===z||"'"===z?(w.skipTo("<"===z?">":"'"),w.next(),"tag-regex"):this.Wb(w,z)},w.prototype.Wd=function(w){return w.skipTo(")"),"attribute-regex"},{startState:function(){return new w},T:function(w,z){return z.Da(w)}}})})(CodeMirror);
(function(w){w.registerHelper("lint","funnelql",function(z,L){$FQL.parse(z).then(function(){L([])})["catch"](function(z){z=void 0!==z.Ke?{from:w.Pos(z.Ke,z.hg),to:w.Pos(z.pf,z.nf),message:z.message,severity:"error"}:{from:w.Pos(0,0),to:w.Pos(0,0),message:z.message,severity:"error"};var F=[];F.push(z);L(F)})})})(CodeMirror);
(function(w){function z(n,u,w){var z=n.getLineHandle(u.line),m=u.ch-1,C=w&&w.Se;null==C&&(C=/(^| )cm-fat-cursor($| )/.test(n.getWrapperElement().className));C=!C&&0<=m&&x[z.text.charAt(m)]||x[z.text.charAt(++m)];if(!C||"\\"===z.text.charAt(m-1))return null;z=">"==C.charAt(1)?1:-1;if(w&&w.Ld&&0<z!=(m==u.ch))return null;n.getTokenTypeAt(O(u.line,m+1));n=L(n,O(u.line,m+(0<z?1:0)),z,w);return null==n?null:{from:O(u.line,m),to:n&&n.i,match:n&&n.ch==C.charAt(0),forward:0<z}}function L(n,u,w,z){var m=z&&
z.Yf||1E4,C=z&&z.Zf||1E3;z=[];for(var C=0<w?Math.min(u.line+C,n.lastLine()+1):Math.max(n.firstLine()-1,u.line-C),q=u.line;q!=C;q+=w){var E=n.getLine(q);if(E){var F=0<w?0:E.length-1,A=0<w?E.length:-1;if(!(E.length>m))for(q==u.line&&(F=u.ch-(0>w?1:0));F!=A;F+=w){var L=E.charAt(F);if((")"===L||"("===L)&&"\\"!==E.charAt(F-1))if(">"==x[L].charAt(1)==0<w)z.push(L);else{if(!z.length)return{i:O(q,F),ch:L};z.pop()}}}}return q-w!=(0<w?n.lastLine():n.firstLine())&&null}function F(n,u,w){for(var x=n.state.matchBrackets.Xf||
1E3,m=[],C=n.listSelections(),q=0;q<C.length;q++){var E=C[q].empty()&&z(n,C[q].head,w);if(E&&n.getLine(E.from.line).length<=x){var F=E.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";m.push(n.markText(E.from,O(E.from.line,E.from.ch+1),{className:F}));E.to&&n.getLine(E.to.line).length<=x&&m.push(n.markText(E.to,O(E.to.line,E.to.ch+1),{className:F}))}}if(m.length){P&&n.state.focused&&n.focus();w=function(){n.operation(function(){for(var n=0;n<m.length;n++)m[n].clear()})};if(!u)return w;
setTimeout(w,800)}}function X(n){n.operation(function(){n.state.matchBrackets.Ha&&(n.state.matchBrackets.Ha(),n.state.matchBrackets.Ha=null);n.state.matchBrackets.Ha=F(n,!1,n.state.matchBrackets)})}var P=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),O=w.Pos,x={"(":")>",")":"(<"};w.defineOption("matchBrackets",!1,function(n,u,x){x&&x!=w.Init&&(n.off("cursorActivity",X),n.state.matchBrackets&&n.state.matchBrackets.Ha&&(n.state.matchBrackets.Ha(),n.state.matchBrackets.Ha=
null));u&&(n.state.matchBrackets="object"==typeof u?u:{},n.on("cursorActivity",X))});w.defineExtension("matchBrackets",function(){F(this,!0)});w.defineExtension("findMatchingBracket",function(n,u,w){return(w||"boolean"==typeof u)&&(u=w?(w.Ld=u,w):u?{Ld:!0}:null),z(this,n,u)});w.defineExtension("scanForBracket",function(n,u,w,x){return L(this,n,u,x)})})(CodeMirror);
;/*! FunnelQL Editor v1.0.0
 * (c) https://funnelql.com/ */
!function(H){function L(){if(console&&console.error){var c=Array.prototype.slice.call(arguments);c.unshift("font-size:12px;font-weight:bold;color:#333;margin-right:1px;");c.unshift("font-size:8px;color:black;");c.unshift("font-size:8px;font-weight:bold;color:black;");c.unshift("font-size:12px;font-weight:bold;color:blue;margin-right:1px;");"%c\u0192";c.unshift("font-size:12px;font-weight:bold;color:#333;margin-right:1px;");c.unshift("%c\u2772%c\u0192%cQL%c Editor%c\u2773");console.error.apply(null,
c)}}function u(c){return"string"==typeof c}function I(c,a,d){if(d||(d=v),c instanceof Array)for(var b=c.length,e=0;e<b;e++)I(c[e],a,d);else if(aa)d.addEventListener(c,a,!1);else if(d.attachEvent)"DOMContentLoaded"===c&&(c="load",d=H),d.attachEvent("on"+c,a);else try{d["on"+c]=a}catch(B){}}function x(c,a){return a||(a=v),a.getElementsByClassName(c)}function t(c,a,d){return a||(a=v),d?a.querySelectorAll(c):a.querySelector(c)}function n(c,a){return t("[name="+c+"]",a,void 0)}function k(c,a,d){c=v.createElement(c);
a&&M(c,a);d&&(u(d)?c.innerHTML=d:c.appendChild(d));return c}function l(c,a,d){c=c.cloneNode(!0);a&&M(c,a);d&&(u(d)?c.innerHTML=d:c.appendChild(d));return c}function p(c,a){c.appendChild(a)}function M(c,a){for(var d in a)a.hasOwnProperty(d)&&c.setAttribute(d,a[d])}function C(c,a){a.classList.add(c)}function T(c){var a,d=c.match(ba);if(d)try{d=new RegExp(d[1],d[2])}catch(b){d=!1,a=b.message}return a||d||(a="Invalid regular expression: Pattern not recognized: "+c),a?(y=a,!1):!!d}function U(c,a){for(var d,
b=x("fql-popup",c),e=0,k=b.length;e<k;e++)a&&b[e].id===a.id||b[e].classList.remove("fql-active");b=x("fql-btn",c);e=0;for(k=b.length;e<k;e++)(d=b[e].getAttribute("data-cmd"))&&a&&a.classList.contains("fql-popup-"+d)||b[e].classList.remove("fql-active")}function D(c,a){c.style.display=a?"none":""}function q(c,a,d,b){var e=x("fql-error",c)[0];if(b){if(a)a.classList.remove("fql-input-error");else for(c=x("fql-input-error",c),a=0,d=c.length;a<d;a++)c[a].classList.remove("fql-input-error");e.style.visibility=
"hidden"}else a.focus(),C("fql-input-error",a),d&&(e.innerHTML=d),e.style.visibility=d?"visible":"hidden"}function V(c,a,d){var b;b=c.getAttribute("data-on");c=c.getAttribute("data-off");if(b)for(var e=0,k=(b=t(b,d,!0)).length;e<k;e++)D(b[e],!a);if(c)for(e=0,k=(b=t(c,d,!0)).length;e<k;e++)D(b[e],a)}function W(c,a){var d,b={},e=c.parentNode;u(a)&&(a=[d=a]);for(var k=a.length;e&&0<k;){for(var h=0,f=a.length;h<f;h++)e.classList.contains(a[h])&&(b[a[h]]=e,k--);if(e.classList.contains("fql-editor"))break;
e=e.parentNode}return d?b[d]:b}function X(c){var a,d,b=W(c,"fql-popup");c=c.checked;b=((a=n("path-operator",b))||(a=v),a.getElementsByTagName("option"));a=0;for(var e=b.length;a<e;a++)"|"===(d=b[a].innerHTML).substring(0,1)?c||(d=d.substring(1)):c&&(d="|"+d),b[a].innerHTML=d}function Y(){function c(a,b){var c=k,d=e,g=a,f=b,h=g.length,m=c.getCursor(),l=c.getLine(m.line),p=l.substr(0,m.ch),B=p;if(0<m.line)for(var r=m.line-1;0<=r;r--)B=c.getLine(r)+B;var n,l=l.substr(m.ch),r=/\s$/.test(p),q=/^\s/.test(p),
O=(B=/path\([^\)\(]+$/gi.test(B))?">":"+";void 0===f&&(f=0);!1===f&&(O="");(/^\s*$/.test(p)||/\(\s*$/.test(p))&&!B||!/\(\s*$/.test(p)&&(g=/\+\s*$/.test(p)?(n=r?"":" ")+g:(n=(r?"":" ")+O+" ")+g);n&&!1!==f&&0<f&&(f+=n.length);(/^\s*([a-z0-9]|"|\(|\/)/i.test(l)||/^\s*$/i.test(l)&&c.lineCount()>m.line+1)&&(g+=" "+O+(q?"":" "));c.replaceSelection(g);c.focus();g=!1===f||isNaN(f)?m.ch+g.length:0>f?(n&&(h+=n.length),m.ch+h+parseInt(f)):m.ch+parseInt(f);c.setCursor({line:m.line,ch:g});U(d);!0}var a=W(this,
["fql-popup","fql-toolbar","fql-editor"]),d=a["fql-toolbar"],b=a["fql-popup"],e=a["fql-editor"];if(!d)return L(".fql-toolbar not found");var k=P[d.parentNode.getAttribute("data-editor")-1],a=this.getAttribute("data-cmd");switch(a){case "tag":case "url":case "count":case "since":case "path-operator":case "fn":if(b=t(".fql-popup-"+a,d),b.classList.toggle("fql-active")){for(var h,f,l=t("[data-default]",b,!0),g=0,m=l.length;g<m;g++)h=l[g].getAttribute("data-default"),(f=l[g].getAttribute("type"))&&-1!==
["checkbox","radio"].indexOf(f)?l[g].checked=!!h:u(h)&&(l[g].value=h);h=t("[data-show]",b,!0);g=0;for(m=h.length;g<m;g++)f=h[g].getAttribute("data-show"),-1!==["i","v"].indexOf(f)?h[g].style.visibility="i"===f?"hidden":"":D(h[g],!parseInt(f));"path-operator"===a&&function(a,c,b){u(a)&&(a=t("[name="+a+"] option",b,!0));b=0;for(var d=a.length;b<d;b++)"|"===a[b].innerText.substring(0,1)?c||(a[b].innerText=a[b].innerText.substring(1)):c&&(a[b].innerText="|"+a[b].innerText)}(a,!1,b);q(b,!1,!1,1);U(d,b);
C("fql-active",this)}else this.classList.remove("fql-active");break;case "path":c("PATH(  )",6);break;case "insert-since":d=n("operator",b);f=d.value;a=n("since-time",b);g=a.value;m=n("since-date",b);h=m.value;var l=n("since-time-type",b),p=l.value;switch(f){case "time":if(""===g||isNaN(g))return q(b,a,"Invalid time value.");if(0>=(g=parseInt(g)))return q(b,a,"Time value should be greater than 0.");if(-1==="smhdwMy".split("").indexOf(p))return q(b,l,"Invalid time type.");g=g.toString()+p;break;case "date":if(""===
h||!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(h))return q(b,m,"Invalid date");g=h;break;default:return q(b,d,"Select a time type...")}c("SINCE("+g+", (  ) )",-4);break;case "insert-tag":case "insert-url":if("url"==(f="insert-tag"===a?"tag":"url")&&(d=n("loc-"+f+"-cb",b))&&d.checked)return c("URL( location )");if((g=n("regex-"+f+"-cb",b))&&g.checked){if(""===(g=(m=n("regex-"+f,b)).value))return q(b,m);if(!T(g))return q(b,m,y);b="tag"===f?"REGEX( "+g+" )":"URL( REGEX( "+g+" ) )"}else{if(""===(g=(m=n(f,
b)).value))return q(b,m);b="tag"===f?'"'+g+'"':'URL( "'+g+'" )'}c(b);break;case "insert-path-operator":g=n("same-page-cb",b).checked;m=n("path-operator",b);d=m.value;h=n("path-depth",b);f=h.value;a=n("path-depth-type",b).value;if(-1===["<","<=",">",">="].indexOf(d))return q(b,m,"Invalid path depth operator.");if(""!==f&&(isNaN(f)||0>parseInt(f)))return q(b,h,"Path depth should be numeric (>=0).");if(""!==f&&(f=parseInt(f)),!f&&-1!==["<","<=",">="].indexOf(d))return q(b,h,"The selected path depth operator requires a depth.");
if(f&&g&&""===a)return q(b,h,"Same page operator cannot contain path depth.");if(a&&!f)return q(b,h,"The selected path depth type requires a depth.");b=(g?"|":"")+d;f&&(b+=f.toString());c((b+=a)+" ",!1);break;case "insert-count":f=n("operator",b);m=(d=f.value,n("count",b));a=m.value;if(-1===["<","<=",">",">="].indexOf(d))return q(b,f,"Invalid count operator.");if(""===a||isNaN(a)||1>parseInt(a))return q(b,m,"Count value should be numeric (>1).");if((g=n("regex-"+(f="count-tag")+"-cb",b))&&g.checked){if(""===
(g=(m=n("regex-"+f,b)).value))return q(b,m);if(!T(g))return q(b,m,y);b="REGEX( "+g+" )"}else{if(""===(g=(m=n(f,b)).value))return q(b,m);b='"'+g+'"'}c("COUNT( "+b+" "+d+" "+a.toString()+" )");break;case "insert-fn":f=n("fn",b);d=f.value.trim();a=n("arg",b).value.trim();if(""===d||!ca.test(d))return q(b,f,"Invalid function name");c("FN( "+JSON.stringify(d)+(a?", "+JSON.stringify(a):"")+" )")}}function E(c,a,d){a=l(da,{"data-cmd":a,tabindex:d});I("click",Y,a);a=l(ea,!1,a);c.appendChild(a)}function w(c,
a,d,b,e,l,h){b=k("div",{"class":"fql-input fql-"+a+"-input",style:h?"display:none":"","data-show":h?"0":"1"});a=k("input",{type:"text",name:a,placeholder:d,tabindex:e,dir:"auto",id:"fql-input-"+ ++Q,"data-default":l||""});b.appendChild(a);c.appendChild(b);return b}function J(c,a,d,b,e,l){var h=k("div",{"class":"fql-input fql-cb fql-"+a+"-input",style:"","data-show":"1"}),f="fql-input-"+ ++Q,r=k("span",{"class":"fql-cb-input"});a=k("input",{type:"checkbox",name:a,tabindex:b,id:f,"data-default":""});
if(e||l){var g;b={};u(e)&&(b["data-on"]=e,e=g=!0);u(l)&&(b["data-off"]=l,l=g=!0);g&&M(a,b);I("change",function(){this.checked?e&&(!0===e?V(this,!0,c):e(this)):l&&(!0===l?V(this,!1,c):l(this))},a)}r.appendChild(a);p(r,k("span",{},'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>'));h.appendChild(r);p(h,k("label",{"for":f},d));c.appendChild(h)}
function z(c,a,d,b){a=l(fa,{"data-cmd":a,title:d},k("i",{"class":"fqli-"+b}));I("click",Y,a);c.appendChild(a)}function F(c,a){var d="fql-popup-"+ ++Q,d=l(ga,{id:d});C("fql-popup-"+c,d);d.appendChild(a);return d}var v=H.document,aa=v.addEventListener,ca=/^[$A-Z_][0-9A-Z_$]*(\.[$A-Z_][0-9A-Z_$]*)*$/i,Q=0,P=[],Z=H.CodeMirror;if(Z){var y,ba=RegExp("^\\/(.*)\\/([gimuy]+)?$",void 0),ha={mode:"funnelql",indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,autoCloseBrackets:!0,autofocus:!0,lineWrapping:!0,lineNumbers:!0,
gutters:["CodeMirror-lint-markers"],lint:{async:!0,lintOnChange:!0},extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{tables:{users:["name","score","birthDate"],countries:["name","population","size"]}}},ia=k("div",{"class":"fql-editor",role:"application"}),ja=k("div",{"class":"fql-toolbar"},k("div",{"class":"fql-ref"},'<a href="https://funnelql.com/" target="_blank" rel="noopener">&copy; FunnelQL.com<span>Funnel Query Language</span></a>')),fa=k("button",{type:"button",tabindex:"-1",role:"button",
"class":"fql-command fql-btn","aria-pressed":"false","aria-disabled":"false"}),R=k("a",{target:"_blank",rel:"noopener",type:"button",role:"button",tabindex:"-1","class":"fql-command fql-btn"}),S=k("div",{role:"separator","class":"fql-separator","aria-orientation":"vertical"}),ga=k("div",{"class":"fql-popup"},k("div",{"class":"fql-arrow"})),G=k("div",{"class":"fql-layer"}),K=k("select"),A=k("option"),ea=k("div",{"class":"fql-action-buttons"},k("div",{"class":"fql-error",style:"visibility:hidden"})),
da=k("button",{"class":"fql-command fql-submit",role:"button",type:"button"},"Insert");H.FunnelQLEditor=function(c,a){if(void 0===H.$FQL)return L("FunnelQL library not loaded ($FQL missing)");var d;if(u(c)&&(d=c,c=v.getElementById(d)),"object"!=typeof c||!v.body.contains(c)||"TEXTAREA"!==c.nodeName)return L("Invalid FunnelQL editor textarea element reference.",c);d=JSON.parse(JSON.stringify(ha));if(a)for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);var e=0;b=l(ia,{id:(c.id||"fql-editor")+"-"+P.length});
var n=l(ja);z(n,"tag","Tag Query","price-tag");z(n,"url","URL Query","anchor");p(n,l(S));z(n,"path","Path Query","filter");z(n,"path-operator","Path Query Operator","next_path");p(n,l(S));z(n,"count","Count Query","exposure_plus_2");z(n,"since","Since Query (date or time)","restore");p(n,l(S));z(n,"fn","Custom Function Query","plug");var h=l(G);w(h,"tag","Tag name",e=0,++e);var f=w(h,"regex-tag","/tag_name(.*)?/i",0,++e,"",1),r=l(R,{href:"https://regexr.com/",title:"Regular Expression Toolbox (RegExr.com)"},
k("i",{"class":"fqli-gears","aria-hidden":"true"}));C("fql-btn-right",r);f.appendChild(r);J(h,"regex-tag-cb","Regular Expression",++e,".fql-regex-tag-input",".fql-tag-input");E(h,"insert-tag",++e);p(n,F("tag",h));e=0;J(h=l(G),"loc-url-cb","location.href (URL in browser)",++e,"",".fql-input-container");var g=k("div",{"class":"fql-input-container","data-show":"1"});w(g,"url","URL",0,++e);f=w(g,"regex-url","/url(.*)?/i",0,++e,"",1);C("fql-btn-right",r=l(R,{href:"https://regexr.com/",title:"Regular Expression Toolbox (RegExr.com)"},
k("i",{"class":"fqli-gears","aria-hidden":"true"})));f.appendChild(r);J(g,"regex-url-cb","Regular Expression",++e,".fql-regex-url-input",".fql-url-input");h.appendChild(g);E(h,"insert-url",++e);p(n,F("url",h));e=0;J(h=l(G),"same-page-cb","Same page",++e,X,X);for(var g=k("div",{"class":"fql-input fql-path-operator-input"}),f=l(K,{name:"path-operator","data-default":">"}),r=[">",">=","<","<=","=="],m=0,q=r.length;m<q;m++)p(f,l(A,{value:r[m]},r[m]));p(g,k("div",{},f));p(g,k("div",{"class":"fql-depth"},
k("input",{type:"number",min:"1",name:"path-depth",placeholder:"Depth",tabindex:++e,"data-default":""})));for(var f=l(K,{name:"path-depth-type","data-default":""},l(A,{value:""},"Next in path")),t=k("optgroup",{label:"Time depth"}),y="seconds minutes hours days weeks months years".split(" "),m=0,q=(r="smhdwMy".split("")).length;m<q;m++)p(t,l(A,{value:r[m]},y[m]));f.appendChild(t);p(g,k("div",{},f));h.appendChild(g);E(h,"insert-path-operator",++e);p(n,F("path-operator",h));w(h=l(G),"count-tag","Tag name",
e=0,++e);f=w(h,"regex-count-tag","/tag_name(.*)?/i",0,++e,"",1);C("fql-btn-right",r=l(R,{href:"https://regexr.com/",title:"Regular Expression Toolbox (RegExr.com)"},k("i",{"class":"fqli-gears","aria-hidden":"true"})));f.appendChild(r);J(h,"regex-count-cb","Regular Expression",++e,".fql-regex-count-tag-input",".fql-count-tag-input");g=k("div",{"class":"fql-input fql-path-operator-input"});f=l(K,{name:"operator","data-default":">"});m=0;for(q=(r=[">",">=","<","<=","=="]).length;m<q;m++)p(f,l(A,{value:r[m]},
r[m]));p(g,k("div",{},f));p(g,k("div",{"class":"fql-depth"},k("input",{type:"number",min:"1",name:"count",placeholder:"Number of occurrences",tabindex:++e,"data-default":""})));h.appendChild(g);E(h,"insert-count",++e);p(n,F("count",h));h=l(G);e=0;g=k("div",{"class":"fql-input fql-since-input"});p(f=l(K,{name:"operator","data-default":"time"}),l(A,{value:"time"},"Time"));p(f,l(A,{value:"date"},"Date"));I("change",function(){for(var a,b=this.parentNode;b&&!a;){if(b.classList.contains("fql-popup")){a=
b;break}b=b.parentNode}var b=x("fql-since-date",a)[0],c=x("fql-since-time-type",a)[0],d="time"===this.value;D(x("fql-since-time",a)[0],!d);D(c,!d);D(b,d)},f);p(g,k("div",{"class":"fql-since-type"},f));p(g,k("div",{"class":"fql-since-time","data-show":"1"},k("input",{type:"number",min:"1",name:"since-time",placeholder:"Number...",tabindex:++e,"data-default":""})));p(g,k("div",{"class":"fql-since-date",style:"display:none","data-show":"0"},k("input",{type:"datetime-local",name:"since-date",placeholder:"Date",
tabindex:++e,"data-default":""})));f=l(K,{name:"since-time-type","data-default":"s"});y="seconds minutes hours days weeks months years".split(" ");m=0;for(q=(r="smhdwMy".split("")).length;m<q;m++)p(f,l(A,{value:r[m]},y[m]));p(g,k("div",{"class":"fql-since-time-type","data-show":"1"},f));h.appendChild(g);E(h,"insert-since",++e);p(n,F("since",h));w(h=l(G),"fn","Function name",e=0,++e);w(h,"arg","Argument 1...",0,++e);p(h,k("div",{"class":"fql-input-desc"},"You can add multiple arguments. Conditions of a parent query, e.g. <code>SINCE</code>, are added as a extra argument."));
E(h,"insert-fn",++e);p(n,F("fn",h));b.appendChild(n);e=k("div",{"class":"fql-wrapper"});b.appendChild(e);c.parentNode.insertBefore(b,c);e.appendChild(c);var N=Z.fromTextArea(c,d);return N.parse=function(){return new Promise(function(a,b){var c=N.getValue();$FQL.parse(c).then(function(b){a(b)})["catch"](b)})},M(b,{"data-editor":P.push(N)}),N}}else L("CodeMirror not loaded")}(window);
